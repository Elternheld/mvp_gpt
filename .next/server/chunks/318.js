"use strict";exports.id=318,exports.ids=[318],exports.modules={7318:(e,t,l)=>{l.r(t),l.d(t,{KeylessCreatorOrReader:()=>KeylessCreatorOrReader});var s=l(7114),r=l(9885),n=l.n(r),a=l(2620),i=l(82);let o=(0,i.t5)({packageName:"@clerk/nextjs"}),c="__clerk_keys_";async function hashString(e){let t=new TextEncoder,l=t.encode(e),s=await crypto.subtle.digest("SHA-256",l),r=Array.from(new Uint8Array(s)),n=r.map(e=>e.toString(16).padStart(2,"0")).join("");return n.slice(0,16)}async function keyless_getKeylessCookieName(){let e=process.env.PWD;if(!e)return`${c}0`;let t=e.split("/").filter(Boolean).slice(-3).reverse().join("/"),l=await hashString(t);return`${c}${l}`}var u=l(9548);let y={secure:!1,httpOnly:!1,sameSite:"lax"};async function createOrReadKeylessAction(){if(!u.h)return null;let e=await l.e(697).then(l.bind(l,7697)).then(e=>e.createOrReadKeyless()).catch(()=>null);if(!e)return o.throwMissingPublishableKeyError(),null;let{clerkDevelopmentCache:t,createKeylessModeMessage:s}=await l.e(965).then(l.bind(l,5965));null==t||t.log({cacheKey:e.publishableKey,msg:s(e)});let{claimUrl:r,publishableKey:n,secretKey:i,apiKeysUrl:c}=e;return(await (0,a.cookies)()).set(await keyless_getKeylessCookieName(),JSON.stringify({claimUrl:r,publishableKey:n,secretKey:i}),y),{claimUrl:r,publishableKey:n,apiKeysUrl:c}}let KeylessCreatorOrReader=e=>{var t;let{children:l}=e,a=(0,s.useSelectedLayoutSegments)(),i=(null==(t=a[0])?void 0:t.startsWith("/_not-found"))||!1,[o,c]=n().useActionState(createOrReadKeylessAction,null);return((0,r.useEffect)(()=>{i||n().startTransition(()=>{c()})},[i]),n().isValidElement(l))?n().cloneElement(l,{key:null==o?void 0:o.publishableKey,publishableKey:null==o?void 0:o.publishableKey,__internal_keyless_claimKeylessApplicationUrl:null==o?void 0:o.claimUrl,__internal_keyless_copyInstanceKeysUrl:null==o?void 0:o.apiKeysUrl,__internal_bypassMissingPublishableKey:!0}):l}}};