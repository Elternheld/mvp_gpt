"use strict";exports.id=697,exports.ids=[697],exports.modules={7697:(e,t,r)=>{r.r(t),r.d(t,{createOrReadKeyless:()=>createOrReadKeyless,removeKeyless:()=>removeKeyless,safeParseClerkFile:()=>safeParseClerkFile}),r(4014);var i,n,a=r(9252),o=r(2779),l=r(2076),c=r(82);(0,c.t5)({packageName:"@clerk/backend"});var{isDevOrStagingUrl:u}=(0,o.MY)(),h={InvalidSecretKey:"clerk_key_invalid"},p={TokenExpired:"token-expired",TokenInvalid:"token-invalid",TokenInvalidAlgorithm:"token-invalid-algorithm",TokenInvalidAuthorizedParties:"token-invalid-authorized-parties",TokenInvalidSignature:"token-invalid-signature",TokenNotActiveYet:"token-not-active-yet",TokenIatInTheFuture:"token-iat-in-the-future",TokenVerificationFailed:"token-verification-failed",InvalidSecretKey:"secret-key-invalid",LocalJWKMissing:"jwk-local-missing",RemoteJWKFailedToLoad:"jwk-remote-failed-to-load",JWKFailedToResolve:"jwk-failed-to-resolve",JWKKidMismatch:"jwk-kid-mismatch"},m={ContactSupport:"Contact support@clerk.com",EnsureClerkJWT:"Make sure that this is a valid Clerk generate JWT.",SetClerkJWTKey:"Set the CLERK_JWT_KEY environment variable.",SetClerkSecretKey:"Set the CLERK_SECRET_KEY environment variable."},g=class _TokenVerificationError extends Error{constructor({action:e,message:t,reason:r}){super(t),Object.setPrototypeOf(this,_TokenVerificationError.prototype),this.reason=r,this.message=t,this.action=e}getFullMessage(){return`${[this.message,this.action].filter(e=>e).join(" ")} (reason=${this.reason}, token-carrier=${this.tokenCarrier})`}},_=r(6005),y=r(1366),k=fetch.bind(globalThis),b={crypto:_.webcrypto,get fetch(){return k},AbortController:globalThis.AbortController,Blob:globalThis.Blob,FormData:globalThis.FormData,Headers:globalThis.Headers,Request:globalThis.Request,Response:globalThis.Response},v={parse:(e,t)=>(function(e,t,r={}){if(!t.codes){t.codes={};for(let e=0;e<t.chars.length;++e)t.codes[t.chars[e]]=e}if(!r.loose&&e.length*t.bits&7)throw SyntaxError("Invalid padding");let i=e.length;for(;"="===e[i-1];)if(--i,!r.loose&&!((e.length-i)*t.bits&7))throw SyntaxError("Invalid padding");let n=new(r.out??Uint8Array)(i*t.bits/8|0),a=0,o=0,l=0;for(let r=0;r<i;++r){let i=t.codes[e[r]];if(void 0===i)throw SyntaxError("Invalid character "+e[r]);o=o<<t.bits|i,(a+=t.bits)>=8&&(a-=8,n[l++]=255&o>>a)}if(a>=t.bits||255&o<<8-a)throw SyntaxError("Unexpected end of data");return n})(e,S,t),stringify:(e,t)=>(function(e,t,r={}){let{pad:i=!0}=r,n=(1<<t.bits)-1,a="",o=0,l=0;for(let r=0;r<e.length;++r)for(l=l<<8|255&e[r],o+=8;o>t.bits;)o-=t.bits,a+=t.chars[n&l>>o];if(o&&(a+=t.chars[n&l<<t.bits-o]),i)for(;a.length*t.bits&7;)a+="=";return a})(e,S,t)},S={chars:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bits:6},T={RS256:"SHA-256",RS384:"SHA-384",RS512:"SHA-512"},I="RSASSA-PKCS1-v1_5",O={RS256:I,RS384:I,RS512:I},E=Object.keys(T),isArrayString=e=>Array.isArray(e)&&e.length>0&&e.every(e=>"string"==typeof e),assertAudienceClaim=(e,t)=>{let r=[t].flat().filter(e=>!!e),i=[e].flat().filter(e=>!!e),n=r.length>0&&i.length>0;if(n){if("string"==typeof e){if(!r.includes(e))throw new g({action:m.EnsureClerkJWT,reason:p.TokenVerificationFailed,message:`Invalid JWT audience claim (aud) ${JSON.stringify(e)}. Is not included in "${JSON.stringify(r)}".`})}else if(isArrayString(e)&&!e.some(e=>r.includes(e)))throw new g({action:m.EnsureClerkJWT,reason:p.TokenVerificationFailed,message:`Invalid JWT audience claim array (aud) ${JSON.stringify(e)}. Is not included in "${JSON.stringify(r)}".`})}},assertHeaderType=e=>{if(void 0!==e&&"JWT"!==e)throw new g({action:m.EnsureClerkJWT,reason:p.TokenInvalid,message:`Invalid JWT type ${JSON.stringify(e)}. Expected "JWT".`})},assertHeaderAlgorithm=e=>{if(!E.includes(e))throw new g({action:m.EnsureClerkJWT,reason:p.TokenInvalidAlgorithm,message:`Invalid JWT algorithm ${JSON.stringify(e)}. Supported: ${E}.`})},assertSubClaim=e=>{if("string"!=typeof e)throw new g({action:m.EnsureClerkJWT,reason:p.TokenVerificationFailed,message:`Subject claim (sub) is required and must be a string. Received ${JSON.stringify(e)}.`})},assertAuthorizedPartiesClaim=(e,t)=>{if(e&&t&&0!==t.length&&!t.includes(e))throw new g({reason:p.TokenInvalidAuthorizedParties,message:`Invalid JWT Authorized party claim (azp) ${JSON.stringify(e)}. Expected "${t}".`})},assertExpirationClaim=(e,t)=>{if("number"!=typeof e)throw new g({action:m.EnsureClerkJWT,reason:p.TokenVerificationFailed,message:`Invalid JWT expiry date claim (exp) ${JSON.stringify(e)}. Expected number.`});let r=new Date(Date.now()),i=new Date(0);i.setUTCSeconds(e);let n=i.getTime()<=r.getTime()-t;if(n)throw new g({reason:p.TokenExpired,message:`JWT is expired. Expiry date: ${i.toUTCString()}, Current date: ${r.toUTCString()}.`})},assertActivationClaim=(e,t)=>{if(void 0===e)return;if("number"!=typeof e)throw new g({action:m.EnsureClerkJWT,reason:p.TokenVerificationFailed,message:`Invalid JWT not before date claim (nbf) ${JSON.stringify(e)}. Expected number.`});let r=new Date(Date.now()),i=new Date(0);i.setUTCSeconds(e);let n=i.getTime()>r.getTime()+t;if(n)throw new g({reason:p.TokenNotActiveYet,message:`JWT cannot be used prior to not before date claim (nbf). Not before date: ${i.toUTCString()}; Current date: ${r.toUTCString()};`})},assertIssuedAtClaim=(e,t)=>{if(void 0===e)return;if("number"!=typeof e)throw new g({action:m.EnsureClerkJWT,reason:p.TokenVerificationFailed,message:`Invalid JWT issued at date claim (iat) ${JSON.stringify(e)}. Expected number.`});let r=new Date(Date.now()),i=new Date(0);i.setUTCSeconds(e);let n=i.getTime()>r.getTime()+t;if(n)throw new g({reason:p.TokenIatInTheFuture,message:`JWT issued at date claim (iat) is in the future. Issued at date: ${i.toUTCString()}; Current date: ${r.toUTCString()};`})};async function hasValidSignature(e,t){let{header:r,signature:i,raw:n}=e,a=new TextEncoder,o=a.encode([n.header,n.payload].join(".")),l=function(e){let t=T[e],r=O[e];if(!t||!r)throw Error(`Unsupported algorithm ${e}, expected one of ${E.join(",")}.`);return{hash:{name:T[e]},name:O[e]}}(r.alg);try{let e=await function(e,t,r){if("object"==typeof e)return b.crypto.subtle.importKey("jwk",e,t,!1,[r]);let i=function(e){let t=e.replace(/-----BEGIN.*?-----/g,"").replace(/-----END.*?-----/g,"").replace(/\s/g,""),r=(0,y.S)(t),i=new ArrayBuffer(r.length),n=new Uint8Array(i);for(let e=0,t=r.length;e<t;e++)n[e]=r.charCodeAt(e);return n}(e),n="sign"===r?"pkcs8":"spki";return b.crypto.subtle.importKey(n,i,t,!1,[r])}(t,l,"verify"),r=await b.crypto.subtle.verify(l.name,e,i,o);return{data:r}}catch(e){return{errors:[new g({reason:p.TokenInvalidSignature,message:e?.message})]}}}function decodeJwt(e){let t=(e||"").toString().split(".");if(3!==t.length)return{errors:[new g({reason:p.TokenInvalid,message:"Invalid JWT form. A JWT consists of three parts separated by dots."})]};let[r,i,n]=t,a=new TextDecoder,o=JSON.parse(a.decode(v.parse(r,{loose:!0}))),l=JSON.parse(a.decode(v.parse(i,{loose:!0}))),c=v.parse(n,{loose:!0});return{data:{header:o,payload:l,signature:c,raw:{header:r,payload:i,signature:n,text:e}}}}async function verifyJwt(e,t){let{audience:r,authorizedParties:i,clockSkewInMs:n,key:a}=t,o=n||5e3,{data:l,errors:c}=decodeJwt(e);if(c)return{errors:c};let{header:u,payload:h}=l;try{let{typ:e,alg:t}=u;assertHeaderType(e),assertHeaderAlgorithm(t);let{azp:n,sub:a,aud:l,iat:c,exp:p,nbf:m}=h;assertSubClaim(a),assertAudienceClaim([l],[r]),assertAuthorizedPartiesClaim(n,i),assertExpirationClaim(p,o),assertActivationClaim(m,o),assertIssuedAtClaim(c,o)}catch(e){return{errors:[e]}}let{data:_,errors:y}=await hasValidSignature(l,a);return y?{errors:[new g({action:m.EnsureClerkJWT,reason:p.TokenVerificationFailed,message:`Error verifying JWT signature. ${y[0]}`})]}:_?{data:h}:{errors:[new g({reason:p.TokenInvalidSignature,message:"JWT signature is invalid."})]}}var x=r(3390),q=r(2463),j=r(4013),parsePermissions=({per:e,fpm:t})=>{if(!e||!t)return{permissions:[],featurePermissionMap:[]};let r=e.split(",").map(e=>e.trim()),i=t.split(",").map(e=>Number.parseInt(e.trim(),10)).map(e=>e.toString(2).padStart(r.length,"0").split("").map(e=>Number.parseInt(e,10)).reverse()).filter(Boolean);return{permissions:r,featurePermissionMap:i}},__experimental_JWTPayloadToAuthObjectProperties=e=>{let t,r,i,n;let a=e.fva??null,o=e.sts??null;if(2===e.v){if(e.o){t=e.o?.id,i=e.o?.slg,e.o?.rol&&(r=`org:${e.o?.rol}`);let{org:a}=(0,j.Ly)(e.fea),{permissions:o,featurePermissionMap:l}=parsePermissions({per:e.o?.per,fpm:e.o?.fpm});n=function({features:e,permissions:t,featurePermissionMap:r}){if(!e||!t||!r)return[];let i=[];for(let n=0;n<e.length;n++){let a=e[n];if(n>=r.length)continue;let o=r[n];if(o)for(let e=0;e<o.length;e++)1===o[e]&&i.push(`org:${a}:${t[e]}`)}return i}({features:a,featurePermissionMap:l,permissions:o})}}else t=e.org_id,r=e.org_role,i=e.org_slug,n=e.org_permissions;return{sessionClaims:e,sessionId:e.sid,sessionStatus:o,actor:e.act,userId:e.sub,orgId:t,orgRole:r,orgSlug:i,orgPermissions:n,factorVerificationAge:a}},U=r(5092);function s(e){return e.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function D(e){return e&&e.sensitive?"":"i"}function match(e,t){try{var r,i,n,a,o;return r=[],i=function P(e,t,r){var i;return e instanceof RegExp?function(e,t){if(!t)return e;for(var r=/\((?:\?<(.*?)>)?(?!\?)/g,i=0,n=r.exec(e.source);n;)t.push({name:n[1]||i++,prefix:"",suffix:"",modifier:"",pattern:""}),n=r.exec(e.source);return e}(e,t):Array.isArray(e)?(i=e.map(function(e){return P(e,t,r).source}),new RegExp("(?:".concat(i.join("|"),")"),D(r))):function(e,t,r){void 0===r&&(r={});for(var i=r.strict,n=void 0!==i&&i,a=r.start,o=r.end,l=r.encode,c=void 0===l?function(e){return e}:l,u=r.delimiter,h=r.endsWith,p="[".concat(s(void 0===h?"":h),"]|$"),m="[".concat(s(void 0===u?"/#?":u),"]"),g=void 0===a||a?"^":"",_=0;_<e.length;_++){var y=e[_];if("string"==typeof y)g+=s(c(y));else{var k=s(c(y.prefix)),b=s(c(y.suffix));if(y.pattern){if(t&&t.push(y),k||b){if("+"===y.modifier||"*"===y.modifier){var v="*"===y.modifier?"?":"";g+="(?:".concat(k,"((?:").concat(y.pattern,")(?:").concat(b).concat(k,"(?:").concat(y.pattern,"))*)").concat(b,")").concat(v)}else g+="(?:".concat(k,"(").concat(y.pattern,")").concat(b,")").concat(y.modifier)}else{if("+"===y.modifier||"*"===y.modifier)throw TypeError('Can not repeat "'.concat(y.name,'" without a prefix and suffix'));g+="(".concat(y.pattern,")").concat(y.modifier)}}else g+="(?:".concat(k).concat(b,")").concat(y.modifier)}}if(void 0===o||o)n||(g+="".concat(m,"?")),g+=r.endsWith?"(?=".concat(p,")"):"$";else{var S=e[e.length-1],T="string"==typeof S?m.indexOf(S[S.length-1])>-1:void 0===S;n||(g+="(?:".concat(m,"(?=").concat(p,"))?")),T||(g+="(?=".concat(m,"|").concat(p,")"))}return new RegExp(g,D(r))}(function(e,t){void 0===t&&(t={});for(var r=function(e){for(var t=[],r=0;r<e.length;){var i=e[r];if("*"===i||"+"===i||"?"===i){t.push({type:"MODIFIER",index:r,value:e[r++]});continue}if("\\"===i){t.push({type:"ESCAPED_CHAR",index:r++,value:e[r++]});continue}if("{"===i){t.push({type:"OPEN",index:r,value:e[r++]});continue}if("}"===i){t.push({type:"CLOSE",index:r,value:e[r++]});continue}if(":"===i){for(var n="",a=r+1;a<e.length;){var o=e.charCodeAt(a);if(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122||95===o){n+=e[a++];continue}break}if(!n)throw TypeError("Missing parameter name at ".concat(r));t.push({type:"NAME",index:r,value:n}),r=a;continue}if("("===i){var l=1,c="",a=r+1;if("?"===e[a])throw TypeError('Pattern cannot start with "?" at '.concat(a));for(;a<e.length;){if("\\"===e[a]){c+=e[a++]+e[a++];continue}if(")"===e[a]){if(0==--l){a++;break}}else if("("===e[a]&&(l++,"?"!==e[a+1]))throw TypeError("Capturing groups are not allowed at ".concat(a));c+=e[a++]}if(l)throw TypeError("Unbalanced pattern at ".concat(r));if(!c)throw TypeError("Missing pattern at ".concat(r));t.push({type:"PATTERN",index:r,value:c}),r=a;continue}t.push({type:"CHAR",index:r,value:e[r++]})}return t.push({type:"END",index:r,value:""}),t}(e),i=t.prefixes,n=void 0===i?"./":i,a=t.delimiter,o=void 0===a?"/#?":a,l=[],c=0,u=0,h="",f=function(e){if(u<r.length&&r[u].type===e)return r[u++].value},w=function(e){var t=f(e);if(void 0!==t)return t;var i=r[u],n=i.type,a=i.index;throw TypeError("Unexpected ".concat(n," at ").concat(a,", expected ").concat(e))},d=function(){for(var e,t="";e=f("CHAR")||f("ESCAPED_CHAR");)t+=e;return t},M=function(e){for(var t=0;t<o.length;t++){var r=o[t];if(e.indexOf(r)>-1)return!0}return!1},A=function(e){var t=l[l.length-1],r=e||(t&&"string"==typeof t?t:"");if(t&&!r)throw TypeError('Must have text between two parameters, missing text after "'.concat(t.name,'"'));return!r||M(r)?"[^".concat(s(o),"]+?"):"(?:(?!".concat(s(r),")[^").concat(s(o),"])+?")};u<r.length;){var p=f("CHAR"),m=f("NAME"),g=f("PATTERN");if(m||g){var _=p||"";-1===n.indexOf(_)&&(h+=_,_=""),h&&(l.push(h),h=""),l.push({name:m||c++,prefix:_,suffix:"",pattern:g||A(_),modifier:f("MODIFIER")||""});continue}var y=p||f("ESCAPED_CHAR");if(y){h+=y;continue}if(h&&(l.push(h),h=""),f("OPEN")){var _=d(),k=f("NAME")||"",b=f("PATTERN")||"",v=d();w("CLOSE"),l.push({name:k||(b?c++:""),pattern:k&&!b?A(_):b,prefix:_,suffix:v,modifier:f("MODIFIER")||""});continue}w("END")}return l}(e,r),t,r)}(e,r,t),n=t,void 0===n&&(n={}),a=n.decode,o=void 0===a?function(e){return e}:a,function(e){var t=i.exec(e);if(!t)return!1;for(var n=t[0],a=t.index,l=Object.create(null),c=1;c<t.length;c++)!function(e){if(void 0!==t[e]){var i=r[e-1];"*"===i.modifier||"+"===i.modifier?l[i.name]=t[e].split(i.prefix+i.suffix).map(function(e){return o(e,i)}):l[i.name]=o(t[e],i)}}(c);return{path:n,index:a,params:l}}}catch(e){throw Error(`Invalid path and options: Consult the documentation of path-to-regexp here: https://github.com/pillarjs/path-to-regexp/tree/6.x
${e.message}`)}}var N="https://api.clerk.com",J="@clerk/backend@1.30.0",R="2025-04-10",H={Session:"__session",Refresh:"__refresh",ClientUat:"__client_uat",Handshake:"__clerk_handshake",DevBrowser:"__clerk_db_jwt",RedirectCount:"__clerk_redirect_count"},F={Cookies:H,Headers:{Accept:"accept",AuthMessage:"x-clerk-auth-message",Authorization:"authorization",AuthReason:"x-clerk-auth-reason",AuthSignature:"x-clerk-auth-signature",AuthStatus:"x-clerk-auth-status",AuthToken:"x-clerk-auth-token",CacheControl:"cache-control",ClerkRedirectTo:"x-clerk-redirect-to",ClerkRequestData:"x-clerk-request-data",ClerkUrl:"x-clerk-clerk-url",CloudFrontForwardedProto:"cloudfront-forwarded-proto",ContentType:"content-type",ContentSecurityPolicy:"content-security-policy",ContentSecurityPolicyReportOnly:"content-security-policy-report-only",EnableDebug:"x-clerk-debug",ForwardedHost:"x-forwarded-host",ForwardedPort:"x-forwarded-port",ForwardedProto:"x-forwarded-proto",Host:"host",Location:"location",Nonce:"x-nonce",Origin:"origin",Referrer:"referer",SecFetchDest:"sec-fetch-dest",UserAgent:"user-agent",ReportingEndpoints:"reporting-endpoints"},ContentTypes:{Json:"application/json"},QueryParameters:{ClerkSynced:"__clerk_synced",SuffixedCookies:"suffixed_cookies",ClerkRedirectUrl:"__clerk_redirect_url",DevBrowser:H.DevBrowser,Handshake:H.Handshake,HandshakeHelp:"__clerk_help",LegacyDevBrowser:"__dev_session",HandshakeReason:"__clerk_hs_reason"}},z=RegExp("(?<!:)/{1,}","g");function joinPaths(...e){return e.filter(e=>e).join("/").replace(z,"/")}var K=class{constructor(e){this.request=e}requireId(e){if(!e)throw Error("A valid resource ID is required.")}},W="/actor_tokens",L=class extends K{async create(e){return this.request({method:"POST",path:W,bodyParams:e})}async revoke(e){return this.requireId(e),this.request({method:"POST",path:joinPaths(W,e,"revoke")})}},B="/accountless_applications",$=class extends K{async createAccountlessApplication(){return this.request({method:"POST",path:B})}async completeAccountlessApplicationOnboarding(){return this.request({method:"POST",path:joinPaths(B,"complete")})}},G="/allowlist_identifiers",V=class extends K{async getAllowlistIdentifierList(e={}){return this.request({method:"GET",path:G,queryParams:{...e,paginated:!0}})}async createAllowlistIdentifier(e){return this.request({method:"POST",path:G,bodyParams:e})}async deleteAllowlistIdentifier(e){return this.requireId(e),this.request({method:"DELETE",path:joinPaths(G,e)})}},Q=class extends K{async changeDomain(e){return this.request({method:"POST",path:joinPaths("/beta_features","change_domain"),bodyParams:e})}},Y="/blocklist_identifiers",Z=class extends K{async getBlocklistIdentifierList(e={}){return this.request({method:"GET",path:Y,queryParams:e})}async createBlocklistIdentifier(e){return this.request({method:"POST",path:Y,bodyParams:e})}async deleteBlocklistIdentifier(e){return this.requireId(e),this.request({method:"DELETE",path:joinPaths(Y,e)})}},X="/clients",ee=class extends K{async getClientList(e={}){return this.request({method:"GET",path:X,queryParams:{...e,paginated:!0}})}async getClient(e){return this.requireId(e),this.request({method:"GET",path:joinPaths(X,e)})}verifyClient(e){return this.request({method:"POST",path:joinPaths(X,"verify"),bodyParams:{token:e}})}},et="/domains",er=class extends K{async list(){return this.request({method:"GET",path:et})}async add(e){return this.request({method:"POST",path:et,bodyParams:e})}async update(e){let{domainId:t,...r}=e;return this.requireId(t),this.request({method:"PATCH",path:joinPaths(et,t),bodyParams:r})}async delete(e){return this.deleteDomain(e)}async deleteDomain(e){return this.requireId(e),this.request({method:"DELETE",path:joinPaths(et,e)})}},ei="/email_addresses",es=class extends K{async getEmailAddress(e){return this.requireId(e),this.request({method:"GET",path:joinPaths(ei,e)})}async createEmailAddress(e){return this.request({method:"POST",path:ei,bodyParams:e})}async updateEmailAddress(e,t={}){return this.requireId(e),this.request({method:"PATCH",path:joinPaths(ei,e),bodyParams:t})}async deleteEmailAddress(e){return this.requireId(e),this.request({method:"DELETE",path:joinPaths(ei,e)})}},en="/instance",ea=class extends K{async get(){return this.request({method:"GET",path:en})}async update(e){return this.request({method:"PATCH",path:en,bodyParams:e})}async updateRestrictions(e){return this.request({method:"PATCH",path:joinPaths(en,"restrictions"),bodyParams:e})}async updateOrganizationSettings(e){return this.request({method:"PATCH",path:joinPaths(en,"organization_settings"),bodyParams:e})}},eo="/invitations",el=class extends K{async getInvitationList(e={}){return this.request({method:"GET",path:eo,queryParams:{...e,paginated:!0}})}async createInvitation(e){return this.request({method:"POST",path:eo,bodyParams:e})}async revokeInvitation(e){return this.requireId(e),this.request({method:"POST",path:joinPaths(eo,e,"revoke")})}},ec=class extends K{async getJwks(){return this.request({method:"GET",path:"/jwks"})}},ed="/jwt_templates",eu=class extends K{async list(e={}){return this.request({method:"GET",path:ed,queryParams:{...e,paginated:!0}})}async get(e){return this.requireId(e),this.request({method:"GET",path:joinPaths(ed,e)})}async create(e){return this.request({method:"POST",path:ed,bodyParams:e})}async update(e){let{templateId:t,...r}=e;return this.requireId(t),this.request({method:"PATCH",path:joinPaths(ed,t),bodyParams:r})}async delete(e){return this.requireId(e),this.request({method:"DELETE",path:joinPaths(ed,e)})}},eh="/organizations",ep=class extends K{async getOrganizationList(e){return this.request({method:"GET",path:eh,queryParams:e})}async createOrganization(e){return this.request({method:"POST",path:eh,bodyParams:e})}async getOrganization(e){let{includeMembersCount:t}=e,r="organizationId"in e?e.organizationId:e.slug;return this.requireId(r),this.request({method:"GET",path:joinPaths(eh,r),queryParams:{includeMembersCount:t}})}async updateOrganization(e,t){return this.requireId(e),this.request({method:"PATCH",path:joinPaths(eh,e),bodyParams:t})}async updateOrganizationLogo(e,t){this.requireId(e);let r=new b.FormData;return r.append("file",t?.file),t?.uploaderUserId&&r.append("uploader_user_id",t?.uploaderUserId),this.request({method:"PUT",path:joinPaths(eh,e,"logo"),formData:r})}async deleteOrganizationLogo(e){return this.requireId(e),this.request({method:"DELETE",path:joinPaths(eh,e,"logo")})}async updateOrganizationMetadata(e,t){return this.requireId(e),this.request({method:"PATCH",path:joinPaths(eh,e,"metadata"),bodyParams:t})}async deleteOrganization(e){return this.request({method:"DELETE",path:joinPaths(eh,e)})}async getOrganizationMembershipList(e){let{organizationId:t,...r}=e;return this.requireId(t),this.request({method:"GET",path:joinPaths(eh,t,"memberships"),queryParams:r})}async createOrganizationMembership(e){let{organizationId:t,...r}=e;return this.requireId(t),this.request({method:"POST",path:joinPaths(eh,t,"memberships"),bodyParams:r})}async updateOrganizationMembership(e){let{organizationId:t,userId:r,...i}=e;return this.requireId(t),this.request({method:"PATCH",path:joinPaths(eh,t,"memberships",r),bodyParams:i})}async updateOrganizationMembershipMetadata(e){let{organizationId:t,userId:r,...i}=e;return this.request({method:"PATCH",path:joinPaths(eh,t,"memberships",r,"metadata"),bodyParams:i})}async deleteOrganizationMembership(e){let{organizationId:t,userId:r}=e;return this.requireId(t),this.request({method:"DELETE",path:joinPaths(eh,t,"memberships",r)})}async getOrganizationInvitationList(e){let{organizationId:t,...r}=e;return this.requireId(t),this.request({method:"GET",path:joinPaths(eh,t,"invitations"),queryParams:r})}async createOrganizationInvitation(e){let{organizationId:t,...r}=e;return this.requireId(t),this.request({method:"POST",path:joinPaths(eh,t,"invitations"),bodyParams:r})}async getOrganizationInvitation(e){let{organizationId:t,invitationId:r}=e;return this.requireId(t),this.requireId(r),this.request({method:"GET",path:joinPaths(eh,t,"invitations",r)})}async revokeOrganizationInvitation(e){let{organizationId:t,invitationId:r,...i}=e;return this.requireId(t),this.request({method:"POST",path:joinPaths(eh,t,"invitations",r,"revoke"),bodyParams:i})}async getOrganizationDomainList(e){let{organizationId:t,...r}=e;return this.requireId(t),this.request({method:"GET",path:joinPaths(eh,t,"domains"),queryParams:r})}async createOrganizationDomain(e){let{organizationId:t,...r}=e;return this.requireId(t),this.request({method:"POST",path:joinPaths(eh,t,"domains"),bodyParams:{...r,verified:r.verified??!0}})}async updateOrganizationDomain(e){let{organizationId:t,domainId:r,...i}=e;return this.requireId(t),this.requireId(r),this.request({method:"PATCH",path:joinPaths(eh,t,"domains",r),bodyParams:i})}async deleteOrganizationDomain(e){let{organizationId:t,domainId:r}=e;return this.requireId(t),this.requireId(r),this.request({method:"DELETE",path:joinPaths(eh,t,"domains",r)})}},ef="/oauth_applications",em=class extends K{async list(e={}){return this.request({method:"GET",path:ef,queryParams:e})}async get(e){return this.requireId(e),this.request({method:"GET",path:joinPaths(ef,e)})}async create(e){return this.request({method:"POST",path:ef,bodyParams:e})}async update(e){let{oauthApplicationId:t,...r}=e;return this.requireId(t),this.request({method:"PATCH",path:joinPaths(ef,t),bodyParams:r})}async delete(e){return this.requireId(e),this.request({method:"DELETE",path:joinPaths(ef,e)})}async rotateSecret(e){return this.requireId(e),this.request({method:"POST",path:joinPaths(ef,e,"rotate_secret")})}},eg="/phone_numbers",e_=class extends K{async getPhoneNumber(e){return this.requireId(e),this.request({method:"GET",path:joinPaths(eg,e)})}async createPhoneNumber(e){return this.request({method:"POST",path:eg,bodyParams:e})}async updatePhoneNumber(e,t={}){return this.requireId(e),this.request({method:"PATCH",path:joinPaths(eg,e),bodyParams:t})}async deletePhoneNumber(e){return this.requireId(e),this.request({method:"DELETE",path:joinPaths(eg,e)})}},ey=class extends K{async verify(e){return this.request({method:"POST",path:"/proxy_checks",bodyParams:e})}},ek="/redirect_urls",eb=class extends K{async getRedirectUrlList(){return this.request({method:"GET",path:ek,queryParams:{paginated:!0}})}async getRedirectUrl(e){return this.requireId(e),this.request({method:"GET",path:joinPaths(ek,e)})}async createRedirectUrl(e){return this.request({method:"POST",path:ek,bodyParams:e})}async deleteRedirectUrl(e){return this.requireId(e),this.request({method:"DELETE",path:joinPaths(ek,e)})}},ew="/saml_connections",ev=class extends K{async getSamlConnectionList(e={}){return this.request({method:"GET",path:ew,queryParams:e})}async createSamlConnection(e){return this.request({method:"POST",path:ew,bodyParams:e})}async getSamlConnection(e){return this.requireId(e),this.request({method:"GET",path:joinPaths(ew,e)})}async updateSamlConnection(e,t={}){return this.requireId(e),this.request({method:"PATCH",path:joinPaths(ew,e),bodyParams:t})}async deleteSamlConnection(e){return this.requireId(e),this.request({method:"DELETE",path:joinPaths(ew,e)})}},eS="/sessions",eT=class extends K{async getSessionList(e={}){return this.request({method:"GET",path:eS,queryParams:{...e,paginated:!0}})}async getSession(e){return this.requireId(e),this.request({method:"GET",path:joinPaths(eS,e)})}async createSession(e){return this.request({method:"POST",path:eS,bodyParams:e})}async revokeSession(e){return this.requireId(e),this.request({method:"POST",path:joinPaths(eS,e,"revoke")})}async verifySession(e,t){return this.requireId(e),this.request({method:"POST",path:joinPaths(eS,e,"verify"),bodyParams:{token:t}})}async getToken(e,t){return this.requireId(e),this.request({method:"POST",path:joinPaths(eS,e,"tokens",t||"")})}async refreshSession(e,t){this.requireId(e);let{suffixed_cookies:r,...i}=t;return this.request({method:"POST",path:joinPaths(eS,e,"refresh"),bodyParams:i,queryParams:{suffixed_cookies:r}})}},eP="/sign_in_tokens",eI=class extends K{async createSignInToken(e){return this.request({method:"POST",path:eP,bodyParams:e})}async revokeSignInToken(e){return this.requireId(e),this.request({method:"POST",path:joinPaths(eP,e,"revoke")})}},eO="/sign_ups",eA=class extends K{async get(e){return this.requireId(e),this.request({method:"GET",path:joinPaths(eO,e)})}async update(e){let{signUpAttemptId:t,...r}=e;return this.request({method:"PATCH",path:joinPaths(eO,t),bodyParams:r})}},eC=class extends K{async createTestingToken(){return this.request({method:"POST",path:"/testing_tokens"})}},eE="/users",ex=class extends K{async getUserList(e={}){let{limit:t,offset:r,orderBy:i,...n}=e,[a,o]=await Promise.all([this.request({method:"GET",path:eE,queryParams:e}),this.getCount(n)]);return{data:a,totalCount:o}}async getUser(e){return this.requireId(e),this.request({method:"GET",path:joinPaths(eE,e)})}async createUser(e){return this.request({method:"POST",path:eE,bodyParams:e})}async updateUser(e,t={}){return this.requireId(e),this.request({method:"PATCH",path:joinPaths(eE,e),bodyParams:t})}async updateUserProfileImage(e,t){this.requireId(e);let r=new b.FormData;return r.append("file",t?.file),this.request({method:"POST",path:joinPaths(eE,e,"profile_image"),formData:r})}async updateUserMetadata(e,t){return this.requireId(e),this.request({method:"PATCH",path:joinPaths(eE,e,"metadata"),bodyParams:t})}async deleteUser(e){return this.requireId(e),this.request({method:"DELETE",path:joinPaths(eE,e)})}async getCount(e={}){return this.request({method:"GET",path:joinPaths(eE,"count"),queryParams:e})}async getUserOauthAccessToken(e,t){this.requireId(e);let r=t.startsWith("oauth_"),i=r?t:`oauth_${t}`;return r&&(0,l.x9)("getUserOauthAccessToken(userId, provider)","Remove the `oauth_` prefix from the `provider` argument."),this.request({method:"GET",path:joinPaths(eE,e,"oauth_access_tokens",i),queryParams:{paginated:!0}})}async disableUserMFA(e){return this.requireId(e),this.request({method:"DELETE",path:joinPaths(eE,e,"mfa")})}async getOrganizationMembershipList(e){let{userId:t,limit:r,offset:i}=e;return this.requireId(t),this.request({method:"GET",path:joinPaths(eE,t,"organization_memberships"),queryParams:{limit:r,offset:i}})}async getOrganizationInvitationList(e){let{userId:t,...r}=e;return this.requireId(t),this.request({method:"GET",path:joinPaths(eE,t,"organization_invitations"),queryParams:r})}async verifyPassword(e){let{userId:t,password:r}=e;return this.requireId(t),this.request({method:"POST",path:joinPaths(eE,t,"verify_password"),bodyParams:{password:r}})}async verifyTOTP(e){let{userId:t,code:r}=e;return this.requireId(t),this.request({method:"POST",path:joinPaths(eE,t,"verify_totp"),bodyParams:{code:r}})}async banUser(e){return this.requireId(e),this.request({method:"POST",path:joinPaths(eE,e,"ban")})}async unbanUser(e){return this.requireId(e),this.request({method:"POST",path:joinPaths(eE,e,"unban")})}async lockUser(e){return this.requireId(e),this.request({method:"POST",path:joinPaths(eE,e,"lock")})}async unlockUser(e){return this.requireId(e),this.request({method:"POST",path:joinPaths(eE,e,"unlock")})}async deleteUserProfileImage(e){return this.requireId(e),this.request({method:"DELETE",path:joinPaths(eE,e,"profile_image")})}async deleteUserPasskey(e){return this.requireId(e.userId),this.requireId(e.passkeyIdentificationId),this.request({method:"DELETE",path:joinPaths(eE,e.userId,"passkeys",e.passkeyIdentificationId)})}async deleteUserWeb3Wallet(e){return this.requireId(e.userId),this.requireId(e.web3WalletIdentificationId),this.request({method:"DELETE",path:joinPaths(eE,e.userId,"web3_wallets",e.web3WalletIdentificationId)})}async deleteUserExternalAccount(e){return this.requireId(e.userId),this.requireId(e.externalAccountId),this.request({method:"DELETE",path:joinPaths(eE,e.userId,"external_accounts",e.externalAccountId)})}async deleteUserBackupCodes(e){return this.requireId(e),this.request({method:"DELETE",path:joinPaths(eE,e,"backup_code")})}async deleteUserTOTP(e){return this.requireId(e),this.request({method:"DELETE",path:joinPaths(eE,e,"totp")})}},eq="/waitlist_entries",ej=class extends K{async list(e={}){return this.request({method:"GET",path:eq,queryParams:e})}async create(e){return this.request({method:"POST",path:eq,bodyParams:e})}},eU="/webhooks",eN=class extends K{async createSvixApp(){return this.request({method:"POST",path:joinPaths(eU,"svix")})}async generateSvixAuthURL(){return this.request({method:"POST",path:joinPaths(eU,"svix_url")})}async deleteSvixApp(){return this.request({method:"DELETE",path:joinPaths(eU,"svix")})}};function assertValidSecretKey(e){if(!e||"string"!=typeof e)throw Error("Missing Clerk Secret Key. Go to https://dashboard.clerk.com and get your key for your instance.")}var eJ=class _ActorToken{constructor(e,t,r,i,n,a,o,l){this.id=e,this.status=t,this.userId=r,this.actor=i,this.token=n,this.url=a,this.createdAt=o,this.updatedAt=l}static fromJSON(e){return new _ActorToken(e.id,e.status,e.user_id,e.actor,e.token,e.url,e.created_at,e.updated_at)}},eR=class _AccountlessApplication{constructor(e,t,r,i){this.publishableKey=e,this.secretKey=t,this.claimUrl=r,this.apiKeysUrl=i}static fromJSON(e){return new _AccountlessApplication(e.publishable_key,e.secret_key,e.claim_url,e.api_keys_url)}},eH=class _AllowlistIdentifier{constructor(e,t,r,i,n,a,o){this.id=e,this.identifier=t,this.identifierType=r,this.createdAt=i,this.updatedAt=n,this.instanceId=a,this.invitationId=o}static fromJSON(e){return new _AllowlistIdentifier(e.id,e.identifier,e.identifier_type,e.created_at,e.updated_at,e.instance_id,e.invitation_id)}},eD=class _BlocklistIdentifier{constructor(e,t,r,i,n,a){this.id=e,this.identifier=t,this.identifierType=r,this.createdAt=i,this.updatedAt=n,this.instanceId=a}static fromJSON(e){return new _BlocklistIdentifier(e.id,e.identifier,e.identifier_type,e.created_at,e.updated_at,e.instance_id)}},eF=class _SessionActivity{constructor(e,t,r,i,n,a,o,l){this.id=e,this.isMobile=t,this.ipAddress=r,this.city=i,this.country=n,this.browserVersion=a,this.browserName=o,this.deviceType=l}static fromJSON(e){return new _SessionActivity(e.id,e.is_mobile,e.ip_address,e.city,e.country,e.browser_version,e.browser_name,e.device_type)}},eM=class _Session{constructor(e,t,r,i,n,a,o,l,c,u,h,p=null){this.id=e,this.clientId=t,this.userId=r,this.status=i,this.lastActiveAt=n,this.expireAt=a,this.abandonAt=o,this.createdAt=l,this.updatedAt=c,this.lastActiveOrganizationId=u,this.latestActivity=h,this.actor=p}static fromJSON(e){return new _Session(e.id,e.client_id,e.user_id,e.status,e.last_active_at,e.expire_at,e.abandon_at,e.created_at,e.updated_at,e.last_active_organization_id,e.latest_activity&&eF.fromJSON(e.latest_activity),e.actor)}},ez=class _Client{constructor(e,t,r,i,n,a,o,l){this.id=e,this.sessionIds=t,this.sessions=r,this.signInId=i,this.signUpId=n,this.lastActiveSessionId=a,this.createdAt=o,this.updatedAt=l}static fromJSON(e){return new _Client(e.id,e.session_ids,e.sessions.map(e=>eM.fromJSON(e)),e.sign_in_id,e.sign_up_id,e.last_active_session_id,e.created_at,e.updated_at)}},eK=class _CnameTarget{constructor(e,t,r){this.host=e,this.value=t,this.required=r}static fromJSON(e){return new _CnameTarget(e.host,e.value,e.required)}},eW=class _Cookies{constructor(e){this.cookies=e}static fromJSON(e){return new _Cookies(e.cookies)}},eL=class _DeletedObject{constructor(e,t,r,i){this.object=e,this.id=t,this.slug=r,this.deleted=i}static fromJSON(e){return new _DeletedObject(e.object,e.id||null,e.slug||null,e.deleted)}},eB=class _Domain{constructor(e,t,r,i,n,a,o,l){this.id=e,this.name=t,this.isSatellite=r,this.frontendApiUrl=i,this.developmentOrigin=n,this.cnameTargets=a,this.accountsPortalUrl=o,this.proxyUrl=l}static fromJSON(e){return new _Domain(e.id,e.name,e.is_satellite,e.frontend_api_url,e.development_origin,e.cname_targets&&e.cname_targets.map(e=>eK.fromJSON(e)),e.accounts_portal_url,e.proxy_url)}},e$=class _Email{constructor(e,t,r,i,n,a,o,l,c,u,h){this.id=e,this.fromEmailName=t,this.emailAddressId=r,this.toEmailAddress=i,this.subject=n,this.body=a,this.bodyPlain=o,this.status=l,this.slug=c,this.data=u,this.deliveredByClerk=h}static fromJSON(e){return new _Email(e.id,e.from_email_name,e.email_address_id,e.to_email_address,e.subject,e.body,e.body_plain,e.status,e.slug,e.data,e.delivered_by_clerk)}},eG=class _IdentificationLink{constructor(e,t){this.id=e,this.type=t}static fromJSON(e){return new _IdentificationLink(e.id,e.type)}},eV=class _Verification{constructor(e,t,r=null,i=null,n=null,a=null,o=null){this.status=e,this.strategy=t,this.externalVerificationRedirectURL=r,this.attempts=i,this.expireAt=n,this.nonce=a,this.message=o}static fromJSON(e){return new _Verification(e.status,e.strategy,e.external_verification_redirect_url?new URL(e.external_verification_redirect_url):null,e.attempts,e.expire_at,e.nonce)}},eQ=class _EmailAddress{constructor(e,t,r,i){this.id=e,this.emailAddress=t,this.verification=r,this.linkedTo=i}static fromJSON(e){return new _EmailAddress(e.id,e.email_address,e.verification&&eV.fromJSON(e.verification),e.linked_to.map(e=>eG.fromJSON(e)))}},eY=class _ExternalAccount{constructor(e,t,r,i,n,a,o,l,c,u,h,p={},m,g){this.id=e,this.provider=t,this.identificationId=r,this.externalId=i,this.approvedScopes=n,this.emailAddress=a,this.firstName=o,this.lastName=l,this.imageUrl=c,this.username=u,this.phoneNumber=h,this.publicMetadata=p,this.label=m,this.verification=g}static fromJSON(e){return new _ExternalAccount(e.id,e.provider,e.identification_id,e.provider_user_id,e.approved_scopes,e.email_address,e.first_name,e.last_name,e.image_url||"",e.username,e.phone_number,e.public_metadata,e.label,e.verification&&eV.fromJSON(e.verification))}},eZ=class _Instance{constructor(e,t,r){this.id=e,this.environmentType=t,this.allowedOrigins=r}static fromJSON(e){return new _Instance(e.id,e.environment_type,e.allowed_origins)}},eX=class _InstanceRestrictions{constructor(e,t,r,i,n){this.allowlist=e,this.blocklist=t,this.blockEmailSubaddresses=r,this.blockDisposableEmailDomains=i,this.ignoreDotsForGmailAddresses=n}static fromJSON(e){return new _InstanceRestrictions(e.allowlist,e.blocklist,e.block_email_subaddresses,e.block_disposable_email_domains,e.ignore_dots_for_gmail_addresses)}},e0=class _InstanceSettings{constructor(e,t,r,i,n){this.id=e,this.restrictedToAllowlist=t,this.fromEmailAddress=r,this.progressiveSignUp=i,this.enhancedEmailDeliverability=n}static fromJSON(e){return new _InstanceSettings(e.id,e.restricted_to_allowlist,e.from_email_address,e.progressive_sign_up,e.enhanced_email_deliverability)}},e1=class _Invitation{constructor(e,t,r,i,n,a,o,l){this.id=e,this.emailAddress=t,this.publicMetadata=r,this.createdAt=i,this.updatedAt=n,this.status=a,this.url=o,this.revoked=l,this._raw=null}get raw(){return this._raw}static fromJSON(e){let t=new _Invitation(e.id,e.email_address,e.public_metadata,e.created_at,e.updated_at,e.status,e.url,e.revoked);return t._raw=e,t}},e3={AccountlessApplication:"accountless_application",ActorToken:"actor_token",AllowlistIdentifier:"allowlist_identifier",BlocklistIdentifier:"blocklist_identifier",Client:"client",Cookies:"cookies",Domain:"domain",Email:"email",EmailAddress:"email_address",Instance:"instance",InstanceRestrictions:"instance_restrictions",InstanceSettings:"instance_settings",Invitation:"invitation",JwtTemplate:"jwt_template",OauthAccessToken:"oauth_access_token",OAuthApplication:"oauth_application",Organization:"organization",OrganizationInvitation:"organization_invitation",OrganizationMembership:"organization_membership",OrganizationSettings:"organization_settings",PhoneNumber:"phone_number",ProxyCheck:"proxy_check",RedirectUrl:"redirect_url",Session:"session",SignInToken:"sign_in_token",SignUpAttempt:"sign_up_attempt",SmsMessage:"sms_message",User:"user",WaitlistEntry:"waitlist_entry",Token:"token",TotalCount:"total_count"},e2=class _JwtTemplate{constructor(e,t,r,i,n,a,o,l,c){this.id=e,this.name=t,this.claims=r,this.lifetime=i,this.allowedClockSkew=n,this.customSigningKey=a,this.signingAlgorithm=o,this.createdAt=l,this.updatedAt=c}static fromJSON(e){return new _JwtTemplate(e.id,e.name,e.claims,e.lifetime,e.allowed_clock_skew,e.custom_signing_key,e.signing_algorithm,e.created_at,e.updated_at)}},e5=class _OauthAccessToken{constructor(e,t,r,i={},n,a,o,l){this.externalAccountId=e,this.provider=t,this.token=r,this.publicMetadata=i,this.label=n,this.scopes=a,this.tokenSecret=o,this.expiresAt=l}static fromJSON(e){return new _OauthAccessToken(e.external_account_id,e.provider,e.token,e.public_metadata,e.label||"",e.scopes,e.token_secret,e.expires_at)}},e6=class _OAuthApplication{constructor(e,t,r,i,n,a,o,l,c,u,h,p,m,g,_){this.id=e,this.instanceId=t,this.name=r,this.clientId=i,this.isPublic=n,this.scopes=a,this.redirectUris=o,this.authorizeUrl=l,this.tokenFetchUrl=c,this.userInfoUrl=u,this.discoveryUrl=h,this.tokenIntrospectionUrl=p,this.createdAt=m,this.updatedAt=g,this.clientSecret=_}static fromJSON(e){return new _OAuthApplication(e.id,e.instance_id,e.name,e.client_id,e.public,e.scopes,e.redirect_uris,e.authorize_url,e.token_fetch_url,e.user_info_url,e.discovery_url,e.token_introspection_url,e.created_at,e.updated_at,e.client_secret)}},e8=class _Organization{constructor(e,t,r,i,n,a,o,l={},c={},u,h,p,m){this.id=e,this.name=t,this.slug=r,this.imageUrl=i,this.hasImage=n,this.createdAt=a,this.updatedAt=o,this.publicMetadata=l,this.privateMetadata=c,this.maxAllowedMemberships=u,this.adminDeleteEnabled=h,this.membersCount=p,this.createdBy=m,this._raw=null}get raw(){return this._raw}static fromJSON(e){let t=new _Organization(e.id,e.name,e.slug,e.image_url||"",e.has_image,e.created_at,e.updated_at,e.public_metadata,e.private_metadata,e.max_allowed_memberships,e.admin_delete_enabled,e.members_count,e.created_by);return t._raw=e,t}},e9=class _OrganizationInvitation{constructor(e,t,r,i,n,a,o,l,c,u,h={},p={},m){this.id=e,this.emailAddress=t,this.role=r,this.roleName=i,this.organizationId=n,this.createdAt=a,this.updatedAt=o,this.expiresAt=l,this.url=c,this.status=u,this.publicMetadata=h,this.privateMetadata=p,this.publicOrganizationData=m,this._raw=null}get raw(){return this._raw}static fromJSON(e){let t=new _OrganizationInvitation(e.id,e.email_address,e.role,e.role_name,e.organization_id,e.created_at,e.updated_at,e.expires_at,e.url,e.status,e.public_metadata,e.private_metadata,e.public_organization_data);return t._raw=e,t}},e7=class _OrganizationMembership{constructor(e,t,r,i={},n={},a,o,l,c){this.id=e,this.role=t,this.permissions=r,this.publicMetadata=i,this.privateMetadata=n,this.createdAt=a,this.updatedAt=o,this.organization=l,this.publicUserData=c,this._raw=null}get raw(){return this._raw}static fromJSON(e){let t=new _OrganizationMembership(e.id,e.role,e.permissions,e.public_metadata,e.private_metadata,e.created_at,e.updated_at,e8.fromJSON(e.organization),e4.fromJSON(e.public_user_data));return t._raw=e,t}},e4=class _OrganizationMembershipPublicUserData{constructor(e,t,r,i,n,a){this.identifier=e,this.firstName=t,this.lastName=r,this.imageUrl=i,this.hasImage=n,this.userId=a}static fromJSON(e){return new _OrganizationMembershipPublicUserData(e.identifier,e.first_name,e.last_name,e.image_url,e.has_image,e.user_id)}},te=class _OrganizationSettings{constructor(e,t,r,i,n,a,o,l,c){this.enabled=e,this.maxAllowedMemberships=t,this.maxAllowedRoles=r,this.maxAllowedPermissions=i,this.creatorRole=n,this.adminDeleteEnabled=a,this.domainsEnabled=o,this.domainsEnrollmentModes=l,this.domainsDefaultRole=c}static fromJSON(e){return new _OrganizationSettings(e.enabled,e.max_allowed_memberships,e.max_allowed_roles,e.max_allowed_permissions,e.creator_role,e.admin_delete_enabled,e.domains_enabled,e.domains_enrollment_modes,e.domains_default_role)}},tt=class _PhoneNumber{constructor(e,t,r,i,n,a){this.id=e,this.phoneNumber=t,this.reservedForSecondFactor=r,this.defaultSecondFactor=i,this.verification=n,this.linkedTo=a}static fromJSON(e){return new _PhoneNumber(e.id,e.phone_number,e.reserved_for_second_factor,e.default_second_factor,e.verification&&eV.fromJSON(e.verification),e.linked_to.map(e=>eG.fromJSON(e)))}},tr=class _ProxyCheck{constructor(e,t,r,i,n,a,o){this.id=e,this.domainId=t,this.lastRunAt=r,this.proxyUrl=i,this.successful=n,this.createdAt=a,this.updatedAt=o}static fromJSON(e){return new _ProxyCheck(e.id,e.domain_id,e.last_run_at,e.proxy_url,e.successful,e.created_at,e.updated_at)}},ti=class _RedirectUrl{constructor(e,t,r,i){this.id=e,this.url=t,this.createdAt=r,this.updatedAt=i}static fromJSON(e){return new _RedirectUrl(e.id,e.url,e.created_at,e.updated_at)}},ts=class _SignInToken{constructor(e,t,r,i,n,a,o){this.id=e,this.userId=t,this.token=r,this.status=i,this.url=n,this.createdAt=a,this.updatedAt=o}static fromJSON(e){return new _SignInToken(e.id,e.user_id,e.token,e.status,e.url,e.created_at,e.updated_at)}},tn=class _SignUpAttemptVerification{constructor(e,t){this.nextAction=e,this.supportedStrategies=t}static fromJSON(e){return new _SignUpAttemptVerification(e.next_action,e.supported_strategies)}},ta=class _SignUpAttemptVerifications{constructor(e,t,r,i){this.emailAddress=e,this.phoneNumber=t,this.web3Wallet=r,this.externalAccount=i}static fromJSON(e){return new _SignUpAttemptVerifications(e.email_address&&tn.fromJSON(e.email_address),e.phone_number&&tn.fromJSON(e.phone_number),e.web3_wallet&&tn.fromJSON(e.web3_wallet),e.external_account)}},to=class _SignUpAttempt{constructor(e,t,r,i,n,a,o,l,c,u,h,p,m,g,_,y,k,b,v,S,T,I){this.id=e,this.status=t,this.requiredFields=r,this.optionalFields=i,this.missingFields=n,this.unverifiedFields=a,this.verifications=o,this.username=l,this.emailAddress=c,this.phoneNumber=u,this.web3Wallet=h,this.passwordEnabled=p,this.firstName=m,this.lastName=g,this.customAction=_,this.externalId=y,this.createdSessionId=k,this.createdUserId=b,this.abandonAt=v,this.legalAcceptedAt=S,this.publicMetadata=T,this.unsafeMetadata=I}static fromJSON(e){return new _SignUpAttempt(e.id,e.status,e.required_fields,e.optional_fields,e.missing_fields,e.unverified_fields,e.verifications?ta.fromJSON(e.verifications):null,e.username,e.email_address,e.phone_number,e.web3_wallet,e.password_enabled,e.first_name,e.last_name,e.custom_action,e.external_id,e.created_session_id,e.created_user_id,e.abandon_at,e.legal_accepted_at,e.public_metadata,e.unsafe_metadata)}},tl=class _SMSMessage{constructor(e,t,r,i,n,a,o){this.id=e,this.fromPhoneNumber=t,this.toPhoneNumber=r,this.message=i,this.status=n,this.phoneNumberId=a,this.data=o}static fromJSON(e){return new _SMSMessage(e.id,e.from_phone_number,e.to_phone_number,e.message,e.status,e.phone_number_id,e.data)}},tc=class _Token{constructor(e){this.jwt=e}static fromJSON(e){return new _Token(e.jwt)}},td=class _SamlAccountConnection{constructor(e,t,r,i,n,a,o,l,c,u){this.id=e,this.name=t,this.domain=r,this.active=i,this.provider=n,this.syncUserAttributes=a,this.allowSubdomains=o,this.allowIdpInitiated=l,this.createdAt=c,this.updatedAt=u}static fromJSON(e){return new _SamlAccountConnection(e.id,e.name,e.domain,e.active,e.provider,e.sync_user_attributes,e.allow_subdomains,e.allow_idp_initiated,e.created_at,e.updated_at)}},tu=class _SamlAccount{constructor(e,t,r,i,n,a,o,l,c){this.id=e,this.provider=t,this.providerUserId=r,this.active=i,this.emailAddress=n,this.firstName=a,this.lastName=o,this.verification=l,this.samlConnection=c}static fromJSON(e){return new _SamlAccount(e.id,e.provider,e.provider_user_id,e.active,e.email_address,e.first_name,e.last_name,e.verification&&eV.fromJSON(e.verification),e.saml_connection&&td.fromJSON(e.saml_connection))}},th=class _Web3Wallet{constructor(e,t,r){this.id=e,this.web3Wallet=t,this.verification=r}static fromJSON(e){return new _Web3Wallet(e.id,e.web3_wallet,e.verification&&eV.fromJSON(e.verification))}},tp=class _User{constructor(e,t,r,i,n,a,o,l,c,u,h,p,m,g,_,y,k,b,v,S={},T={},I={},O=[],E=[],x=[],q=[],j=[],U,N,J=null,R,H){this.id=e,this.passwordEnabled=t,this.totpEnabled=r,this.backupCodeEnabled=i,this.twoFactorEnabled=n,this.banned=a,this.locked=o,this.createdAt=l,this.updatedAt=c,this.imageUrl=u,this.hasImage=h,this.primaryEmailAddressId=p,this.primaryPhoneNumberId=m,this.primaryWeb3WalletId=g,this.lastSignInAt=_,this.externalId=y,this.username=k,this.firstName=b,this.lastName=v,this.publicMetadata=S,this.privateMetadata=T,this.unsafeMetadata=I,this.emailAddresses=O,this.phoneNumbers=E,this.web3Wallets=x,this.externalAccounts=q,this.samlAccounts=j,this.lastActiveAt=U,this.createOrganizationEnabled=N,this.createOrganizationsLimit=J,this.deleteSelfEnabled=R,this.legalAcceptedAt=H,this._raw=null}get raw(){return this._raw}static fromJSON(e){let t=new _User(e.id,e.password_enabled,e.totp_enabled,e.backup_code_enabled,e.two_factor_enabled,e.banned,e.locked,e.created_at,e.updated_at,e.image_url,e.has_image,e.primary_email_address_id,e.primary_phone_number_id,e.primary_web3_wallet_id,e.last_sign_in_at,e.external_id,e.username,e.first_name,e.last_name,e.public_metadata,e.private_metadata,e.unsafe_metadata,(e.email_addresses||[]).map(e=>eQ.fromJSON(e)),(e.phone_numbers||[]).map(e=>tt.fromJSON(e)),(e.web3_wallets||[]).map(e=>th.fromJSON(e)),(e.external_accounts||[]).map(e=>eY.fromJSON(e)),(e.saml_accounts||[]).map(e=>tu.fromJSON(e)),e.last_active_at,e.create_organization_enabled,e.create_organizations_limit,e.delete_self_enabled,e.legal_accepted_at);return t._raw=e,t}get primaryEmailAddress(){return this.emailAddresses.find(({id:e})=>e===this.primaryEmailAddressId)??null}get primaryPhoneNumber(){return this.phoneNumbers.find(({id:e})=>e===this.primaryPhoneNumberId)??null}get primaryWeb3Wallet(){return this.web3Wallets.find(({id:e})=>e===this.primaryWeb3WalletId)??null}get fullName(){return[this.firstName,this.lastName].join(" ").trim()||null}},tf=class _WaitlistEntry{constructor(e,t,r,i,n,a,o){this.id=e,this.emailAddress=t,this.status=r,this.invitation=i,this.createdAt=n,this.updatedAt=a,this.isLocked=o}static fromJSON(e){return new _WaitlistEntry(e.id,e.email_address,e.status,e.invitation&&e1.fromJSON(e.invitation),e.created_at,e.updated_at,e.is_locked)}};function jsonToObject(e){if("string"!=typeof e&&"object"in e&&"deleted"in e)return eL.fromJSON(e);switch(e.object){case e3.AccountlessApplication:return eR.fromJSON(e);case e3.ActorToken:return eJ.fromJSON(e);case e3.AllowlistIdentifier:return eH.fromJSON(e);case e3.BlocklistIdentifier:return eD.fromJSON(e);case e3.Client:return ez.fromJSON(e);case e3.Cookies:return eW.fromJSON(e);case e3.Domain:return eB.fromJSON(e);case e3.EmailAddress:return eQ.fromJSON(e);case e3.Email:return e$.fromJSON(e);case e3.Instance:return eZ.fromJSON(e);case e3.InstanceRestrictions:return eX.fromJSON(e);case e3.InstanceSettings:return e0.fromJSON(e);case e3.Invitation:return e1.fromJSON(e);case e3.JwtTemplate:return e2.fromJSON(e);case e3.OauthAccessToken:return e5.fromJSON(e);case e3.OAuthApplication:return e6.fromJSON(e);case e3.Organization:return e8.fromJSON(e);case e3.OrganizationInvitation:return e9.fromJSON(e);case e3.OrganizationMembership:return e7.fromJSON(e);case e3.OrganizationSettings:return te.fromJSON(e);case e3.PhoneNumber:return tt.fromJSON(e);case e3.ProxyCheck:return tr.fromJSON(e);case e3.RedirectUrl:return ti.fromJSON(e);case e3.SignInToken:return ts.fromJSON(e);case e3.SignUpAttempt:return to.fromJSON(e);case e3.Session:return eM.fromJSON(e);case e3.SmsMessage:return tl.fromJSON(e);case e3.Token:return tc.fromJSON(e);case e3.TotalCount:return e.total_count;case e3.User:return tp.fromJSON(e);case e3.WaitlistEntry:return tf.fromJSON(e);default:return e}}function buildRequest(e){let requestFn=async t=>{let r;let{secretKey:i,requireSecretKey:n=!0,apiUrl:a=N,apiVersion:o="v1",userAgent:l=J}=e,{path:c,method:u,queryParams:h,headerParams:p,bodyParams:m,formData:g}=t;n&&assertValidSecretKey(i);let _=joinPaths(a,o,c),y=new URL(_);if(h){let e=x({...h});for(let[t,r]of Object.entries(e))r&&[r].flat().forEach(e=>y.searchParams.append(t,e))}let k={"Clerk-API-Version":R,"User-Agent":l,...p};i&&(k.Authorization=`Bearer ${i}`);try{if(g)r=await b.fetch(y.href,{method:u,headers:k,body:g});else{k["Content-Type"]="application/json";let e="GET"!==u&&m&&Object.keys(m).length>0,t=e?{body:JSON.stringify(x(m,{deep:!1}))}:null;r=await b.fetch(y.href,{method:u,headers:k,...t})}let e=r?.headers&&r.headers?.get(F.Headers.ContentType)===F.ContentTypes.Json,t=await (e?r.json():r.text());if(!r.ok)return{data:null,errors:parseErrors(t),status:r?.status,statusText:r?.statusText,clerkTraceId:getTraceId(t,r?.headers),retryAfter:getRetryAfter(r?.headers)};return{...function(e){if(Array.isArray(e)){let t=e.map(e=>jsonToObject(e));return{data:t}}return e&&"object"==typeof e&&"data"in e&&Array.isArray(e.data)&&void 0!==e.data?{data:e.data.map(e=>jsonToObject(e)),totalCount:e.total_count}:{data:jsonToObject(e)}}(t),errors:null}}catch(e){if(e instanceof Error)return{data:null,errors:[{code:"unexpected_error",message:e.message||"Unexpected error"}],clerkTraceId:getTraceId(e,r?.headers)};return{data:null,errors:parseErrors(e),status:r?.status,statusText:r?.statusText,clerkTraceId:getTraceId(e,r?.headers),retryAfter:getRetryAfter(r?.headers)}}};return async(...e)=>{let{data:t,errors:r,totalCount:i,status:n,statusText:a,clerkTraceId:o,retryAfter:l}=await requestFn(...e);if(r){let e=new c.gO(a||"",{data:[],status:n,clerkTraceId:o,retryAfter:l});throw e.errors=r,e}return void 0!==i?{data:t,totalCount:i}:t}}function getTraceId(e,t){if(e&&"object"==typeof e&&"clerk_trace_id"in e&&"string"==typeof e.clerk_trace_id)return e.clerk_trace_id;let r=t?.get("cf-ray");return r||""}function getRetryAfter(e){let t=e?.get("Retry-After");if(!t)return;let r=parseInt(t,10);if(!isNaN(r))return r}function parseErrors(e){if(e&&"object"==typeof e&&"errors"in e){let t=e.errors;return t.length>0?t.map(c.nU):[]}return[]}function createBackendApiClient(e){let t=buildRequest(e);return{__experimental_accountlessApplications:new $(buildRequest({...e,requireSecretKey:!1})),actorTokens:new L(t),allowlistIdentifiers:new V(t),betaFeatures:new Q(t),blocklistIdentifiers:new Z(t),clients:new ee(t),domains:new er(t),emailAddresses:new es(t),instance:new ea(t),invitations:new el(t),jwks:new ec(t),jwtTemplates:new eu(t),oauthApplications:new em(t),organizations:new ep(t),phoneNumbers:new e_(t),proxyChecks:new ey(t),redirectUrls:new eb(t),samlConnections:new ev(t),sessions:new eT(t),signInTokens:new eI(t),signUps:new eA(t),testingTokens:new eC(t),users:new ex(t),waitlistEntries:new ej(t),webhooks:new eN(t)}}var createDebug=e=>()=>{let t={...e};return t.secretKey=(t.secretKey||"").substring(0,7),t.jwtKey=(t.jwtKey||"").substring(0,7),{...t}},createGetToken=e=>{let{fetcher:t,sessionToken:r,sessionId:i}=e||{};return async(e={})=>i?e.template?t(i,e.template):r:null},tm={SignedIn:"signed-in",SignedOut:"signed-out",Handshake:"handshake"},tg={ClientUATWithoutSessionToken:"client-uat-but-no-session-token",DevBrowserMissing:"dev-browser-missing",DevBrowserSync:"dev-browser-sync",PrimaryRespondsToSyncing:"primary-responds-to-syncing",SatelliteCookieNeedsSyncing:"satellite-needs-syncing",SessionTokenAndUATMissing:"session-token-and-uat-missing",SessionTokenMissing:"session-token-missing",SessionTokenExpired:"session-token-expired",SessionTokenIATBeforeClientUAT:"session-token-iat-before-client-uat",SessionTokenNBF:"session-token-nbf",SessionTokenIatInTheFuture:"session-token-iat-in-the-future",SessionTokenWithoutClientUAT:"session-token-but-no-client-uat",ActiveOrganizationMismatch:"active-organization-mismatch",UnexpectedError:"unexpected-error"};function signedIn(e,t,r=new Headers,i){let n=function(e,t,r){let{actor:i,sessionId:n,sessionStatus:a,userId:o,orgId:l,orgRole:c,orgSlug:u,orgPermissions:h,factorVerificationAge:p}=__experimental_JWTPayloadToAuthObjectProperties(r),m=createBackendApiClient(e),g=createGetToken({sessionId:n,sessionToken:t,fetcher:async(...e)=>(await m.sessions.getToken(...e)).jwt});return{actor:i,sessionClaims:r,sessionId:n,sessionStatus:a,userId:o,orgId:l,orgRole:c,orgSlug:u,orgPermissions:h,factorVerificationAge:p,getToken:g,has:(0,q.QL)({orgId:l,orgRole:c,orgPermissions:h,userId:o,factorVerificationAge:p,features:r.fea||"",plans:r.pla||""}),debug:createDebug({...e,sessionToken:t})}}(e,i,t);return{status:tm.SignedIn,reason:null,message:null,proxyUrl:e.proxyUrl||"",publishableKey:e.publishableKey||"",isSatellite:e.isSatellite||!1,domain:e.domain||"",signInUrl:e.signInUrl||"",signUpUrl:e.signUpUrl||"",afterSignInUrl:e.afterSignInUrl||"",afterSignUpUrl:e.afterSignUpUrl||"",isSignedIn:!0,toAuth:()=>n,headers:r,token:i}}function signedOut(e,t,r="",i=new Headers){return withDebugHeaders({status:tm.SignedOut,reason:t,message:r,proxyUrl:e.proxyUrl||"",publishableKey:e.publishableKey||"",isSatellite:e.isSatellite||!1,domain:e.domain||"",signInUrl:e.signInUrl||"",signUpUrl:e.signUpUrl||"",afterSignInUrl:e.afterSignInUrl||"",afterSignUpUrl:e.afterSignUpUrl||"",isSignedIn:!1,headers:i,toAuth:()=>({sessionClaims:null,sessionId:null,sessionStatus:null,userId:null,actor:null,orgId:null,orgRole:null,orgSlug:null,orgPermissions:null,factorVerificationAge:null,getToken:()=>Promise.resolve(null),has:()=>!1,debug:createDebug({...e,status:tm.SignedOut,reason:t,message:r})}),token:null})}var withDebugHeaders=e=>{let t=new Headers(e.headers||{});if(e.message)try{t.set(F.Headers.AuthMessage,e.message)}catch{}if(e.reason)try{t.set(F.Headers.AuthReason,e.reason)}catch{}if(e.status)try{t.set(F.Headers.AuthStatus,e.status)}catch{}return e.headers=t,e},t_=class extends URL{isCrossOrigin(e){return this.origin!==new URL(e.toString()).origin}},createClerkUrl=(...e)=>new t_(...e),ty=class extends Request{constructor(e,t){let r="string"!=typeof e&&"url"in e?e.url:String(e);super(r,t||"string"==typeof e?void 0:e),this.clerkUrl=this.deriveUrlFromHeaders(this),this.cookies=this.parseCookies(this)}toJSON(){return{url:this.clerkUrl.href,method:this.method,headers:JSON.stringify(Object.fromEntries(this.headers)),clerkUrl:this.clerkUrl.toString(),cookies:JSON.stringify(Object.fromEntries(this.cookies))}}deriveUrlFromHeaders(e){let t=new URL(e.url),r=e.headers.get(F.Headers.ForwardedProto),i=e.headers.get(F.Headers.ForwardedHost),n=e.headers.get(F.Headers.Host),a=t.protocol,o=this.getFirstValueFromHeader(i)??n,l=this.getFirstValueFromHeader(r)??a?.replace(/[:/]/,""),c=o&&l?`${l}://${o}`:t.origin;return c===t.origin?createClerkUrl(t):createClerkUrl(t.pathname+t.search,c)}getFirstValueFromHeader(e){return e?.split(",")[0]}parseCookies(e){let t=(0,U.Qc)(this.decodeCookieValue(e.headers.get("cookie")||""));return new Map(Object.entries(t))}decodeCookieValue(e){return e?e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent):e}},createClerkRequest=(...e)=>e[0]instanceof ty?e[0]:new ty(...e),tk={},tb=0;function setInCache(e,t=!0){tk[e.kid]=e,tb=t?Date.now():-1}var tw="local";function loadClerkJWKFromLocal(e){if(!tk[tw]){if(!e)throw new g({action:m.SetClerkJWTKey,message:"Missing local JWK.",reason:p.LocalJWKMissing});let t=e.replace(/\r\n|\n|\r/g,"").replace("-----BEGIN PUBLIC KEY-----","").replace("-----END PUBLIC KEY-----","").replace("MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA","").replace("IDAQAB","").replace(/\+/g,"-").replace(/\//g,"_");setInCache({kid:"local",kty:"RSA",alg:"RS256",n:t,e:"AQAB"},!1)}return tk[tw]}async function loadClerkJWKFromRemote({secretKey:e,apiUrl:t=N,apiVersion:r="v1",kid:i,skipJwksCache:n}){if(n||function(){if(-1===tb)return!1;let e=Date.now()-tb>=3e5;return e&&(tk={}),e}()||!tk[i]){if(!e)throw new g({action:m.ContactSupport,message:"Failed to load JWKS from Clerk Backend or Frontend API.",reason:p.RemoteJWKFailedToLoad});let{keys:i}=await (0,a.X)(()=>fetchJWKSFromBAPI(t,e,r));if(!i||!i.length)throw new g({action:m.ContactSupport,message:"The JWKS endpoint did not contain any signing keys. Contact support@clerk.com.",reason:p.RemoteJWKFailedToLoad});i.forEach(e=>setInCache(e))}let o=tk[i];if(!o){let e=Object.values(tk),t=e.map(e=>e.kid).sort().join(", ");throw new g({action:`Go to your Dashboard and validate your secret and public keys are correct. ${m.ContactSupport} if the issue persists.`,message:`Unable to find a signing key in JWKS that matches the kid='${i}' of the provided session token. Please make sure that the __session cookie or the HTTP authorization header contain a Clerk-generated session JWT. The following kid is available: ${t}`,reason:p.JWKKidMismatch})}return o}async function fetchJWKSFromBAPI(e,t,r){if(!t)throw new g({action:m.SetClerkSecretKey,message:"Missing Clerk Secret Key or API Key. Go to https://dashboard.clerk.com and get your key for your instance.",reason:p.RemoteJWKFailedToLoad});let i=new URL(e);i.pathname=joinPaths(i.pathname,r,"/jwks");let n=await b.fetch(i.href,{headers:{Authorization:`Bearer ${t}`,"Clerk-API-Version":R,"Content-Type":"application/json","User-Agent":J}});if(!n.ok){let e=await n.json(),t=getErrorObjectByCode(e?.errors,h.InvalidSecretKey);if(t){let e=p.InvalidSecretKey;throw new g({action:m.ContactSupport,message:t.message,reason:e})}throw new g({action:m.ContactSupport,message:`Error loading Clerk JWKS from ${i.href} with code=${n.status}`,reason:p.RemoteJWKFailedToLoad})}return n.json()}var getErrorObjectByCode=(e,t)=>e?e.find(e=>e.code===t):null;async function verifyToken(e,t){let{data:r,errors:i}=decodeJwt(e);if(i)return{errors:i};let{header:n}=r,{kid:a}=n;try{let r;if(t.jwtKey)r=loadClerkJWKFromLocal(t.jwtKey);else{if(!t.secretKey)return{errors:[new g({action:m.SetClerkJWTKey,message:"Failed to resolve JWK during verification.",reason:p.JWKFailedToResolve})]};r=await loadClerkJWKFromRemote({...t,kid:a})}return await verifyJwt(e,{...t,key:r})}catch(e){return{errors:[e]}}}var tv=class{constructor(e,t,r){this.cookieSuffix=e,this.clerkRequest=t,this.initPublishableKeyValues(r),this.initHeaderValues(),this.initCookieValues(),this.initHandshakeValues(),Object.assign(this,r),this.clerkUrl=this.clerkRequest.clerkUrl}get sessionToken(){return this.sessionTokenInCookie||this.sessionTokenInHeader}usesSuffixedCookies(){let e=this.getSuffixedCookie(F.Cookies.ClientUat),t=this.getCookie(F.Cookies.ClientUat),r=this.getSuffixedCookie(F.Cookies.Session)||"",i=this.getCookie(F.Cookies.Session)||"";if(i&&!this.tokenHasIssuer(i))return!1;if(i&&!this.tokenBelongsToInstance(i))return!0;if(!e&&!r)return!1;let{data:n}=decodeJwt(i),a=n?.payload.iat||0,{data:o}=decodeJwt(r),l=o?.payload.iat||0;if("0"!==e&&"0"!==t&&a>l||"0"===e&&"0"!==t)return!1;if("production"!==this.instanceType){let r=this.sessionExpired(o);if("0"!==e&&"0"===t&&r)return!1}return!!e||!r}initPublishableKeyValues(e){var t;t=e.publishableKey,(0,o.nQ)(t,{fatal:!0}),this.publishableKey=e.publishableKey;let r=(0,o.nQ)(this.publishableKey,{fatal:!0,proxyUrl:e.proxyUrl,domain:e.domain});this.instanceType=r.instanceType,this.frontendApi=r.frontendApi}initHeaderValues(){this.sessionTokenInHeader=this.parseAuthorizationHeader(this.getHeader(F.Headers.Authorization)),this.origin=this.getHeader(F.Headers.Origin),this.host=this.getHeader(F.Headers.Host),this.forwardedHost=this.getHeader(F.Headers.ForwardedHost),this.forwardedProto=this.getHeader(F.Headers.CloudFrontForwardedProto)||this.getHeader(F.Headers.ForwardedProto),this.referrer=this.getHeader(F.Headers.Referrer),this.userAgent=this.getHeader(F.Headers.UserAgent),this.secFetchDest=this.getHeader(F.Headers.SecFetchDest),this.accept=this.getHeader(F.Headers.Accept)}initCookieValues(){this.sessionTokenInCookie=this.getSuffixedOrUnSuffixedCookie(F.Cookies.Session),this.refreshTokenInCookie=this.getSuffixedCookie(F.Cookies.Refresh),this.clientUat=Number.parseInt(this.getSuffixedOrUnSuffixedCookie(F.Cookies.ClientUat)||"")||0}initHandshakeValues(){this.devBrowserToken=this.getQueryParam(F.QueryParameters.DevBrowser)||this.getSuffixedOrUnSuffixedCookie(F.Cookies.DevBrowser),this.handshakeToken=this.getQueryParam(F.QueryParameters.Handshake)||this.getCookie(F.Cookies.Handshake),this.handshakeRedirectLoopCounter=Number(this.getCookie(F.Cookies.RedirectCount))||0}getQueryParam(e){return this.clerkRequest.clerkUrl.searchParams.get(e)}getHeader(e){return this.clerkRequest.headers.get(e)||void 0}getCookie(e){return this.clerkRequest.cookies.get(e)||void 0}getSuffixedCookie(e){return this.getCookie((0,o._d)(e,this.cookieSuffix))||void 0}getSuffixedOrUnSuffixedCookie(e){return this.usesSuffixedCookies()?this.getSuffixedCookie(e):this.getCookie(e)}parseAuthorizationHeader(e){if(!e)return;let[t,r]=e.split(" ",2);return r?"Bearer"===t?r:void 0:t}tokenHasIssuer(e){let{data:t,errors:r}=decodeJwt(e);return!r&&!!t.payload.iss}tokenBelongsToInstance(e){if(!e)return!1;let{data:t,errors:r}=decodeJwt(e);if(r)return!1;let i=t.payload.iss.replace(/https?:\/\//gi,"");return this.frontendApi===i}sessionExpired(e){return!!e&&e?.payload.exp<=Date.now()/1e3>>0}},createAuthenticateContext=async(e,t)=>{let r=t.publishableKey?await (0,o.P)(t.publishableKey,b.crypto.subtle):"";return new tv(r,e,t)},getCookieName=e=>e.split(";")[0]?.split("=")[0],getCookieValue=e=>e.split(";")[0]?.split("=")[1];async function verifyHandshakeJwt(e,{key:t}){let{data:r,errors:i}=decodeJwt(e);if(i)throw i[0];let{header:n,payload:a}=r,{typ:o,alg:l}=n;assertHeaderType(o),assertHeaderAlgorithm(l);let{data:c,errors:u}=await hasValidSignature(r,t);if(u)throw new g({reason:p.TokenVerificationFailed,message:`Error verifying handshake token. ${u[0]}`});if(!c)throw new g({reason:p.TokenInvalidSignature,message:"Handshake signature is invalid."});return a}async function verifyHandshakeToken(e,t){let r;let{secretKey:i,apiUrl:n,apiVersion:a,jwksCacheTtlInMs:o,jwtKey:l,skipJwksCache:c}=t,{data:u,errors:h}=decodeJwt(e);if(h)throw h[0];let{kid:_}=u.header;if(l)r=loadClerkJWKFromLocal(l);else if(i)r=await loadClerkJWKFromRemote({secretKey:i,apiUrl:n,apiVersion:a,kid:_,jwksCacheTtlInMs:o,skipJwksCache:c});else throw new g({action:m.SetClerkJWTKey,message:"Failed to resolve JWK during handshake verification.",reason:p.JWKFailedToResolve});return await verifyHandshakeJwt(e,{key:r})}var tS={NonEligibleNoCookie:"non-eligible-no-refresh-cookie",NonEligibleNonGet:"non-eligible-non-get",InvalidSessionToken:"invalid-session-token",MissingApiClient:"missing-api-client",MissingSessionToken:"missing-session-token",MissingRefreshToken:"missing-refresh-token",ExpiredSessionTokenDecodeFailed:"expired-session-token-decode-failed",ExpiredSessionTokenMissingSidClaim:"expired-session-token-missing-sid-claim",FetchError:"fetch-error",UnexpectedSDKError:"unexpected-sdk-error",UnexpectedBAPIError:"unexpected-bapi-error"};async function authenticateRequest(e,t){let r=await createAuthenticateContext(createClerkRequest(e),t);assertValidSecretKey(r.secretKey),r.isSatellite&&(function(e,t){if(!e&&(0,o.CY)(t))throw Error("Missing signInUrl. Pass a signInUrl for dev instances if an app is satellite")}(r.signInUrl,r.secretKey),r.signInUrl&&r.origin&&function(e,t){let r;try{r=new URL(e)}catch{throw Error("The signInUrl needs to have a absolute url format.")}if(r.origin===t)throw Error("The signInUrl needs to be on a different origin than your satellite application.")}(r.signInUrl,r.origin),function(e){if(!e)throw Error("Missing domain and proxyUrl. A satellite application needs to specify a domain or a proxyUrl")}(r.proxyUrl||r.domain));let i=function(e){let t=null;if(e?.personalAccountPatterns)try{t=match(e.personalAccountPatterns)}catch(t){throw Error(`Invalid personal account pattern "${e.personalAccountPatterns}": "${t}"`)}let r=null;if(e?.organizationPatterns)try{r=match(e.organizationPatterns)}catch(t){throw Error(`Clerk: Invalid organization pattern "${e.organizationPatterns}": "${t}"`)}return{OrganizationMatcher:r,PersonalAccountMatcher:t}}(t.organizationSyncOptions);async function resolveHandshake(){let e=new Headers({"Access-Control-Allow-Origin":"null","Access-Control-Allow-Credentials":"true"}),t=await verifyHandshakeToken(r.handshakeToken,r),i=t.handshake,n="";if(i.forEach(t=>{e.append("Set-Cookie",t),getCookieName(t).startsWith(F.Cookies.Session)&&(n=getCookieValue(t))}),"development"===r.instanceType){let t=new URL(r.clerkUrl);t.searchParams.delete(F.QueryParameters.Handshake),t.searchParams.delete(F.QueryParameters.HandshakeHelp),e.append(F.Headers.Location,t.toString()),e.set(F.Headers.CacheControl,"no-store")}if(""===n)return signedOut(r,tg.SessionTokenMissing,"",e);let{data:a,errors:[o]=[]}=await verifyToken(n,r);if(a)return signedIn(r,a,e,n);if("development"===r.instanceType&&(o?.reason===p.TokenExpired||o?.reason===p.TokenNotActiveYet||o?.reason===p.TokenIatInTheFuture)){o.tokenCarrier="cookie",console.error(`Clerk: Clock skew detected. This usually means that your system clock is inaccurate. Clerk will attempt to account for the clock skew in development.

To resolve this issue, make sure your system's clock is set to the correct time (e.g. turn off and on automatic time synchronization).

---

${o.getFullMessage()}`);let{data:t,errors:[i]=[]}=await verifyToken(n,{...r,clockSkewInMs:864e5});if(t)return signedIn(r,t,e,n);throw Error(i?.message||"Clerk: Handshake retry failed.")}throw Error(o?.message||"Clerk: Handshake failed.")}async function refreshToken(r){if(!t.apiClient)return{data:null,error:{message:"An apiClient is needed to perform token refresh.",cause:{reason:tS.MissingApiClient}}};let{sessionToken:i,refreshTokenInCookie:n}=r;if(!i)return{data:null,error:{message:"Session token must be provided.",cause:{reason:tS.MissingSessionToken}}};if(!n)return{data:null,error:{message:"Refresh token must be provided.",cause:{reason:tS.MissingRefreshToken}}};let{data:a,errors:o}=decodeJwt(i);if(!a||o)return{data:null,error:{message:"Unable to decode the expired session token.",cause:{reason:tS.ExpiredSessionTokenDecodeFailed,errors:o}}};if(!a?.payload?.sid)return{data:null,error:{message:"Expired session token is missing the `sid` claim.",cause:{reason:tS.ExpiredSessionTokenMissingSidClaim}}};try{let o=await t.apiClient.sessions.refreshSession(a.payload.sid,{format:"cookie",suffixed_cookies:r.usesSuffixedCookies(),expired_token:i||"",refresh_token:n||"",request_origin:r.clerkUrl.origin,request_headers:Object.fromEntries(Array.from(e.headers.entries()).map(([e,t])=>[e,[t]]))});return{data:o.cookies,error:null}}catch(e){if(!e?.errors?.length)return{data:null,error:{message:"Unexpected Server/BAPI error",cause:{reason:tS.UnexpectedBAPIError,errors:[e]}}};if("unexpected_error"===e.errors[0].code)return{data:null,error:{message:"Fetch unexpected error",cause:{reason:tS.FetchError,errors:e.errors}}};return{data:null,error:{message:e.errors[0].code,cause:{reason:e.errors[0].code,errors:e.errors}}}}}async function attemptRefresh(e){let{data:t,error:r}=await refreshToken(e);if(!t||0===t.length)return{data:null,error:r};let i=new Headers,n="";t.forEach(e=>{i.append("Set-Cookie",e),getCookieName(e).startsWith(F.Cookies.Session)&&(n=getCookieValue(e))});let{data:a,errors:o}=await verifyToken(n,e);return o?{data:null,error:{message:"Clerk: unable to verify refreshed session token.",cause:{reason:tS.InvalidSessionToken,errors:o}}}:{data:{jwtPayload:a,sessionToken:n,headers:i},error:null}}function handleMaybeHandshakeStatus(e,n,a,o){if(function(e){let{accept:t,secFetchDest:r}=e;return!!("document"===r||"iframe"===r||!r&&t?.startsWith("text/html"))}(e)){let l=o??function({handshakeReason:e}){let n=function(e){let t=new URL(e);return t.searchParams.delete(F.QueryParameters.DevBrowser),t.searchParams.delete(F.QueryParameters.LegacyDevBrowser),t}(r.clerkUrl),a=r.frontendApi.replace(/http(s)?:\/\//,""),o=new URL(`https://${a}/v1/client/handshake`);o.searchParams.append("redirect_url",n?.href||""),o.searchParams.append(F.QueryParameters.SuffixedCookies,r.usesSuffixedCookies().toString()),o.searchParams.append(F.QueryParameters.HandshakeReason,e),"development"===r.instanceType&&r.devBrowserToken&&o.searchParams.append(F.QueryParameters.DevBrowser,r.devBrowserToken);let l=getOrganizationSyncTarget(r.clerkUrl,t.organizationSyncOptions,i);if(l){let e=function(e){let t=new Map;return"personalAccount"===e.type&&t.set("organization_id",""),"organization"===e.type&&(e.organizationId&&t.set("organization_id",e.organizationId),e.organizationSlug&&t.set("organization_id",e.organizationSlug)),t}(l);e.forEach((e,t)=>{o.searchParams.append(t,e)})}return new Headers({[F.Headers.Location]:o.href})}({handshakeReason:n});l.get(F.Headers.Location)&&l.set(F.Headers.CacheControl,"no-store");let c=function(e){if(3===r.handshakeRedirectLoopCounter)return!0;let t=r.handshakeRedirectLoopCounter+1,i=F.Cookies.RedirectCount;return e.append("Set-Cookie",`${i}=${t}; SameSite=Lax; HttpOnly; Max-Age=3`),!1}(l);return c?(console.log("Clerk: Refreshing the session token resulted in an infinite redirect loop. This usually means that your Clerk instance keys do not match - make sure to copy the correct publishable and secret keys from the Clerk dashboard."),signedOut(e,n,a)):function(e,t,r="",i){return withDebugHeaders({status:tm.Handshake,reason:t,message:r,publishableKey:e.publishableKey||"",isSatellite:e.isSatellite||!1,domain:e.domain||"",proxyUrl:e.proxyUrl||"",signInUrl:e.signInUrl||"",signUpUrl:e.signUpUrl||"",afterSignInUrl:e.afterSignInUrl||"",afterSignUpUrl:e.afterSignUpUrl||"",isSignedIn:!1,headers:i,toAuth:()=>null,token:null})}(e,n,a,l)}return signedOut(e,n,a)}async function authenticateRequestWithTokenInHeader(){let{sessionTokenInHeader:e}=r;try{let{data:t,errors:i}=await verifyToken(e,r);if(i)throw i[0];return signedIn(r,t,void 0,e)}catch(e){return handleError(e,"header")}}async function authenticateRequestWithTokenInCookie(){let e=r.clientUat,n=!!r.sessionTokenInCookie,a=!!r.devBrowserToken;if(r.handshakeToken)try{return await resolveHandshake()}catch(e){e instanceof g&&"development"===r.instanceType?function(e){if(e.reason===p.TokenInvalidSignature)throw Error("Clerk: Handshake token verification failed due to an invalid signature. If you have switched Clerk keys locally, clear your cookies and try again.");throw Error(`Clerk: Handshake token verification failed: ${e.getFullMessage()}.`)}(e):console.error("Clerk: unable to resolve handshake:",e)}if("development"===r.instanceType&&r.clerkUrl.searchParams.has(F.QueryParameters.DevBrowser))return handleMaybeHandshakeStatus(r,tg.DevBrowserSync,"");let o=r.isSatellite&&"document"===r.secFetchDest;if("production"===r.instanceType&&o)return handleMaybeHandshakeStatus(r,tg.SatelliteCookieNeedsSyncing,"");if("development"===r.instanceType&&o&&!r.clerkUrl.searchParams.has(F.QueryParameters.ClerkSynced)){let e=new URL(r.signInUrl);e.searchParams.append(F.QueryParameters.ClerkRedirectUrl,r.clerkUrl.toString());let t=new Headers({[F.Headers.Location]:e.toString()});return handleMaybeHandshakeStatus(r,tg.SatelliteCookieNeedsSyncing,"",t)}let l=new URL(r.clerkUrl).searchParams.get(F.QueryParameters.ClerkRedirectUrl);if("development"===r.instanceType&&!r.isSatellite&&l){let e=new URL(l);r.devBrowserToken&&e.searchParams.append(F.QueryParameters.DevBrowser,r.devBrowserToken),e.searchParams.append(F.QueryParameters.ClerkSynced,"true");let t=new Headers({[F.Headers.Location]:e.toString()});return handleMaybeHandshakeStatus(r,tg.PrimaryRespondsToSyncing,"",t)}if("development"===r.instanceType&&!a)return handleMaybeHandshakeStatus(r,tg.DevBrowserMissing,"");if(!e&&!n)return signedOut(r,tg.SessionTokenAndUATMissing,"");if(!e&&n)return handleMaybeHandshakeStatus(r,tg.SessionTokenWithoutClientUAT,"");if(e&&!n)return handleMaybeHandshakeStatus(r,tg.ClientUATWithoutSessionToken,"");let{data:c,errors:u}=decodeJwt(r.sessionTokenInCookie);if(u)return handleError(u[0],"cookie");if(c.payload.iat<r.clientUat)return handleMaybeHandshakeStatus(r,tg.SessionTokenIATBeforeClientUAT,"");try{let{data:e,errors:n}=await verifyToken(r.sessionTokenInCookie,r);if(n)throw n[0];let a=signedIn(r,e,void 0,r.sessionTokenInCookie),o=function(e,r){let n=getOrganizationSyncTarget(e.clerkUrl,t.organizationSyncOptions,i);if(!n)return null;let a=!1;if("organization"===n.type&&(n.organizationSlug&&n.organizationSlug!==r.orgSlug&&(a=!0),n.organizationId&&n.organizationId!==r.orgId&&(a=!0)),"personalAccount"===n.type&&r.orgId&&(a=!0),!a)return null;if(e.handshakeRedirectLoopCounter>0)return console.warn("Clerk: Organization activation handshake loop detected. This is likely due to an invalid organization ID or slug. Skipping organization activation."),null;let o=handleMaybeHandshakeStatus(e,tg.ActiveOrganizationMismatch,"");return"handshake"!==o.status?null:o}(r,a.toAuth());if(o)return o;return a}catch(e){return handleError(e,"cookie")}return signedOut(r,tg.UnexpectedError)}async function handleError(t,i){let n;if(!(t instanceof g))return signedOut(r,tg.UnexpectedError);if(t.reason===p.TokenExpired&&r.refreshTokenInCookie&&"GET"===e.method){let{data:e,error:t}=await attemptRefresh(r);if(e)return signedIn(r,e.jwtPayload,e.headers,e.sessionToken);n=t?.cause?.reason?t.cause.reason:tS.UnexpectedSDKError}else n="GET"!==e.method?tS.NonEligibleNonGet:r.refreshTokenInCookie?null:tS.NonEligibleNoCookie;t.tokenCarrier=i;let a=[p.TokenExpired,p.TokenNotActiveYet,p.TokenIatInTheFuture].includes(t.reason);return a?handleMaybeHandshakeStatus(r,convertTokenVerificationErrorReasonToAuthErrorReason({tokenError:t.reason,refreshError:n}),t.getFullMessage()):signedOut(r,t.reason,t.getFullMessage())}return r.sessionTokenInHeader?authenticateRequestWithTokenInHeader():authenticateRequestWithTokenInCookie()}var debugRequestState=e=>{let{isSignedIn:t,proxyUrl:r,reason:i,message:n,publishableKey:a,isSatellite:o,domain:l}=e;return{isSignedIn:t,proxyUrl:r,reason:i,message:n,publishableKey:a,isSatellite:o,domain:l}};function getOrganizationSyncTarget(e,t,r){if(!t)return null;if(r.OrganizationMatcher){let i;try{i=r.OrganizationMatcher(e.pathname)}catch(e){return console.error(`Clerk: Failed to apply organization pattern "${t.organizationPatterns}" to a path`,e),null}if(i&&"params"in i){let e=i.params;if("id"in e&&"string"==typeof e.id)return{type:"organization",organizationId:e.id};if("slug"in e&&"string"==typeof e.slug)return{type:"organization",organizationSlug:e.slug};console.warn("Clerk: Detected an organization pattern match, but no organization ID or slug was found in the URL. Does the pattern include `:id` or `:slug`?")}}if(r.PersonalAccountMatcher){let i;try{i=r.PersonalAccountMatcher(e.pathname)}catch(e){return console.error(`Failed to apply personal account pattern "${t.personalAccountPatterns}" to a path`,e),null}if(i)return{type:"personalAccount"}}return null}var convertTokenVerificationErrorReasonToAuthErrorReason=({tokenError:e,refreshError:t})=>{switch(e){case p.TokenExpired:return`${tg.SessionTokenExpired}-refresh-${t}`;case p.TokenNotActiveYet:return tg.SessionTokenNBF;case p.TokenIatInTheFuture:return tg.SessionTokenIatInTheFuture;default:return tg.UnexpectedError}};function mergePreDefinedOptions(e,t){return Object.keys(e).reduce((e,r)=>({...e,[r]:t[r]||e[r]}),{...e})}var tT={secretKey:"",jwtKey:"",apiUrl:void 0,apiVersion:void 0,proxyUrl:"",publishableKey:"",isSatellite:!1,domain:"",audience:""},tP=r(5681),tI=r(9990);let tO={secretKey:tI.Cn,publishableKey:tI.Am,apiUrl:tI.T5,apiVersion:tI.Gn,userAgent:"@clerk/nextjs@6.18.0",proxyUrl:tI.NM,domain:tI.yK,isSatellite:tI.lo,sdkMetadata:tI.nE,telemetry:{disabled:tI.CY,debug:tI.w4}},createClerkClientWithOptions=e=>(function(e){let t={...e},r=createBackendApiClient(t),i=function(e){let t=mergePreDefinedOptions(tT,e.options),r=e.apiClient;return{authenticateRequest:(e,i={})=>{let{apiUrl:n,apiVersion:a}=t,o=mergePreDefinedOptions(t,i);return authenticateRequest(e,{...i,...o,apiUrl:n,apiVersion:a,apiClient:r})},debugRequestState}}({options:t,apiClient:r}),n=new tP.NS({...e.telemetry,publishableKey:t.publishableKey,secretKey:t.secretKey,samplingRate:.1,...t.sdkMetadata?{sdk:t.sdkMetadata.name,sdkVersion:t.sdkMetadata.version}:{}});return{...r,...i,telemetry:n}})({...tO,...e});var tA=Object.getOwnPropertyNames,tC=(i={"src/runtime/node/safe-node-apis.js"(e,t){let{existsSync:i,writeFileSync:n,readFileSync:a,appendFileSync:o,mkdirSync:l,rmSync:c}=r(7561),u=r(9411);t.exports={fs:{existsSync:i,writeFileSync:n,readFileSync:a,appendFileSync:o,mkdirSync:l,rmSync:c},path:u,cwd:()=>process.cwd()}}},function(){return n||(0,i[tA(i)[0]])((n={exports:{}}).exports,n),n.exports});let tE=tC(),throwMissingFsModule=e=>{throw Error(`Clerk: ${e} is missing. This is an internal error. Please contact Clerk's support.`)},nodeFsOrThrow=()=>(tE.fs||throwMissingFsModule("fs"),tE.fs),nodePathOrThrow=()=>(tE.path||throwMissingFsModule("path"),tE.path),nodeCwdOrThrow=()=>(tE.cwd||throwMissingFsModule("cwd"),tE.cwd),tx=".clerk",tq="clerk.lock",generatePath=(...e)=>{let t=nodePathOrThrow(),r=nodeCwdOrThrow();return t.join(r(),tx,...e)},tj=".tmp",getKeylessConfigurationPath=()=>generatePath(tj,"keyless.json"),getKeylessReadMePath=()=>generatePath(tj,"README.md"),tU=!1;function safeParseClerkFile(){let{readFileSync:e}=nodeFsOrThrow();try{let t;let r=getKeylessConfigurationPath();try{t=e(r,{encoding:"utf-8"})||"{}"}catch{t="{}"}return JSON.parse(t)}catch{return}}let lockFileWriting=()=>{let{writeFileSync:e}=nodeFsOrThrow();tU=!0,e(tq,"This file can be deleted. Please delete this file and refresh your application",{encoding:"utf8",mode:"0777",flag:"w"})},unlockFileWriting=()=>{let{rmSync:e}=nodeFsOrThrow();try{e(tq,{force:!0,recursive:!0})}catch{}tU=!1},isFileWritingLocked=()=>{let{existsSync:e}=nodeFsOrThrow();return tU||e(tq)};async function createOrReadKeyless(){let{writeFileSync:e,mkdirSync:t}=nodeFsOrThrow();if(isFileWritingLocked())return null;lockFileWriting();let r=getKeylessConfigurationPath(),i=getKeylessReadMePath();t(generatePath(tj),{recursive:!0}),function(){let{existsSync:e,writeFileSync:t,readFileSync:r,appendFileSync:i}=nodeFsOrThrow(),n=nodePathOrThrow(),a=nodeCwdOrThrow(),o=n.join(a(),".gitignore");e(o)||t(o,"");let l=r(o,"utf-8");l.includes(tx+"/")||i(o,`
# clerk configuration (can include secrets)
/${tx}/
`)}();let n=safeParseClerkFile();if((null==n?void 0:n.publishableKey)&&(null==n?void 0:n.secretKey))return unlockFileWriting(),n;let a=createClerkClientWithOptions({}),o=await a.__experimental_accountlessApplications.createAccountlessApplication().catch(()=>null);if(o){e(r,JSON.stringify(o),{encoding:"utf8",mode:"0777",flag:"w"});let t=`
## DO NOT COMMIT
This directory is auto-generated from \`@clerk/nextjs\` because you are running in Keyless mode. Avoid committing the \`.clerk/\` directory as it includes the secret key of the unclaimed instance.
  `;e(i,t,{encoding:"utf8",mode:"0777",flag:"w"})}return unlockFileWriting(),o}function removeKeyless(){let{rmSync:e}=nodeFsOrThrow();if(!isFileWritingLocked()){lockFileWriting();try{e(generatePath(),{force:!0,recursive:!0})}catch{}unlockFileWriting()}}},5092:(e,t)=>{t.Qc=function(e,t){let i=new r,n=e.length;if(n<2)return i;let a=t?.decode||decode,o=0;do{let t=e.indexOf("=",o);if(-1===t)break;let r=e.indexOf(";",o),l=-1===r?n:r;if(t>l){o=e.lastIndexOf(";",t-1)+1;continue}let c=startIndex(e,o,t),u=endIndex(e,t,c),h=e.slice(c,u);if(void 0===i[h]){let r=startIndex(e,t+1,l),n=endIndex(e,l,r),o=a(e.slice(r,n));i[h]=o}o=l+1}while(o<n);return i},Object.prototype.toString;let r=(()=>{let C=function(){};return C.prototype=Object.create(null),C})();function startIndex(e,t,r){do{let r=e.charCodeAt(t);if(32!==r&&9!==r)return t}while(++t<r);return r}function endIndex(e,t,r){for(;t>r;){let r=e.charCodeAt(--t);if(32!==r&&9!==r)return t+1}return r}function decode(e){if(-1===e.indexOf("%"))return e;try{return decodeURIComponent(e)}catch(t){return e}}},3865:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dotCase=void 0;var i=r(6158),n=r(7202);t.dotCase=function(e,t){return void 0===t&&(t={}),n.noCase(e,i.__assign({delimiter:"."},t))}},891:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.lowerCase=t.localeLowerCase=void 0;var r={tr:{regexp:/\u0130|\u0049|\u0049\u0307/g,map:{:"i",I:"",I:"i"}},az:{regexp:/\u0130/g,map:{:"i",I:"",I:"i"}},lt:{regexp:/\u0049|\u004A|\u012E|\u00CC|\u00CD|\u0128/g,map:{I:"i",J:"j",:"",:"i",:"i",:"i"}}};function lowerCase(e){return e.toLowerCase()}t.localeLowerCase=function(e,t){var i=r[t.toLowerCase()];return i?lowerCase(e.replace(i.regexp,function(e){return i.map[e]})):lowerCase(e)},t.lowerCase=lowerCase},5668:e=>{let isObject=e=>"object"==typeof e&&null!==e,t=Symbol("skip"),isObjectCustom=e=>isObject(e)&&!(e instanceof RegExp)&&!(e instanceof Error)&&!(e instanceof Date),mapObject=(e,r,i,n=new WeakMap)=>{if(i={deep:!1,target:{},...i},n.has(e))return n.get(e);n.set(e,i.target);let{target:a}=i;delete i.target;let mapArray=e=>e.map(e=>isObjectCustom(e)?mapObject(e,r,i,n):e);if(Array.isArray(e))return mapArray(e);for(let[o,l]of Object.entries(e)){let c=r(o,l,e);if(c===t)continue;let[u,h,{shouldRecurse:p=!0}={}]=c;"__proto__"!==u&&(i.deep&&p&&isObjectCustom(h)&&(h=Array.isArray(h)?mapArray(h):mapObject(h,r,i,n)),a[u]=h)}return a};e.exports=(e,t,r)=>{if(!isObject(e))throw TypeError(`Expected an object, got \`${e}\` (${typeof e})`);return mapObject(e,t,r)},e.exports.mapObjectSkip=t},7202:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.noCase=void 0;var i=r(891),n=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],a=/[^A-Z0-9]+/gi;function replace(e,t,r){return t instanceof RegExp?e.replace(t,r):t.reduce(function(e,t){return e.replace(t,r)},e)}t.noCase=function(e,t){void 0===t&&(t={});for(var r=t.splitRegexp,o=t.stripRegexp,l=t.transform,c=void 0===l?i.lowerCase:l,u=t.delimiter,h=void 0===u?" ":u,p=replace(replace(e,void 0===r?n:r,"$1\x00$2"),void 0===o?a:o,"\x00"),m=0,g=p.length;"\x00"===p.charAt(m);)m++;for(;"\x00"===p.charAt(g-1);)g--;return p.slice(m,g).split("\x00").map(c).join(h)}},6979:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.snakeCase=void 0;var i=r(6158),n=r(3865);t.snakeCase=function(e,t){return void 0===t&&(t={}),n.dotCase(e,i.__assign({delimiter:"_"},t))}},3390:(e,t,r)=>{let i=r(5668),{snakeCase:n}=r(6979),a={}.constructor;e.exports=function(e,t){if(Array.isArray(e)){if(e.some(e=>e.constructor!==a))throw Error("obj must be array of plain objects")}else if(e.constructor!==a)throw Error("obj must be an plain object");return i(e,function(e,r){var i;return[t.exclude.some(function(t){return"string"==typeof t?t===e:t.test(e)})?e:n(e,t.parsingOptions),r,(i=t).shouldRecurse?{shouldRecurse:i.shouldRecurse(e,r)}:void 0]},t=Object.assign({deep:!0,exclude:[],parsingOptions:{}},t))}},6158:(e,t,r)=>{r.r(t),r.d(t,{__addDisposableResource:()=>__addDisposableResource,__assign:()=>__assign,__asyncDelegator:()=>__asyncDelegator,__asyncGenerator:()=>__asyncGenerator,__asyncValues:()=>__asyncValues,__await:()=>__await,__awaiter:()=>__awaiter,__classPrivateFieldGet:()=>__classPrivateFieldGet,__classPrivateFieldIn:()=>__classPrivateFieldIn,__classPrivateFieldSet:()=>__classPrivateFieldSet,__createBinding:()=>i,__decorate:()=>__decorate,__disposeResources:()=>__disposeResources,__esDecorate:()=>__esDecorate,__exportStar:()=>__exportStar,__extends:()=>__extends,__generator:()=>__generator,__importDefault:()=>__importDefault,__importStar:()=>__importStar,__makeTemplateObject:()=>__makeTemplateObject,__metadata:()=>__metadata,__param:()=>__param,__propKey:()=>__propKey,__read:()=>__read,__rest:()=>__rest,__rewriteRelativeImportExtension:()=>__rewriteRelativeImportExtension,__runInitializers:()=>__runInitializers,__setFunctionName:()=>__setFunctionName,__spread:()=>__spread,__spreadArray:()=>__spreadArray,__spreadArrays:()=>__spreadArrays,__values:()=>__values,default:()=>o});var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function __extends(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Class extends value "+String(t)+" is not a constructor or null");function __(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(__.prototype=t.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};function __rest(e,t){var r={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&0>t.indexOf(i)&&(r[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var n=0,i=Object.getOwnPropertySymbols(e);n<i.length;n++)0>t.indexOf(i[n])&&Object.prototype.propertyIsEnumerable.call(e,i[n])&&(r[i[n]]=e[i[n]]);return r}function __decorate(e,t,r,i){var n,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,i);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o}function __param(e,t){return function(r,i){t(r,i,e)}}function __esDecorate(e,t,r,i,n,a){function accept(e){if(void 0!==e&&"function"!=typeof e)throw TypeError("Function expected");return e}for(var o,l=i.kind,c="getter"===l?"get":"setter"===l?"set":"value",u=!t&&e?i.static?e:e.prototype:null,h=t||(u?Object.getOwnPropertyDescriptor(u,i.name):{}),p=!1,m=r.length-1;m>=0;m--){var g={};for(var _ in i)g[_]="access"===_?{}:i[_];for(var _ in i.access)g.access[_]=i.access[_];g.addInitializer=function(e){if(p)throw TypeError("Cannot add initializers after decoration has completed");a.push(accept(e||null))};var y=(0,r[m])("accessor"===l?{get:h.get,set:h.set}:h[c],g);if("accessor"===l){if(void 0===y)continue;if(null===y||"object"!=typeof y)throw TypeError("Object expected");(o=accept(y.get))&&(h.get=o),(o=accept(y.set))&&(h.set=o),(o=accept(y.init))&&n.unshift(o)}else(o=accept(y))&&("field"===l?n.unshift(o):h[c]=o)}u&&Object.defineProperty(u,i.name,h),p=!0}function __runInitializers(e,t,r){for(var i=arguments.length>2,n=0;n<t.length;n++)r=i?t[n].call(e,r):t[n].call(e);return i?r:void 0}function __propKey(e){return"symbol"==typeof e?e:"".concat(e)}function __setFunctionName(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function __metadata(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function __awaiter(e,t,r,i){return new(r||(r=Promise))(function(n,a){function fulfilled(e){try{step(i.next(e))}catch(e){a(e)}}function rejected(e){try{step(i.throw(e))}catch(e){a(e)}}function step(e){var t;e.done?n(e.value):((t=e.value)instanceof r?t:new r(function(e){e(t)})).then(fulfilled,rejected)}step((i=i.apply(e,t||[])).next())})}function __generator(e,t){var r,i,n,a={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=verb(0),o.throw=verb(1),o.return=verb(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function verb(l){return function(c){return function(l){if(r)throw TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(a=0)),a;)try{if(r=1,i&&(n=2&l[0]?i.return:l[0]?i.throw||((n=i.return)&&n.call(i),0):i.next)&&!(n=n.call(i,l[1])).done)return n;switch(i=0,n&&(l=[2&l[0],n.value]),l[0]){case 0:case 1:n=l;break;case 4:return a.label++,{value:l[1],done:!1};case 5:a.label++,i=l[1],l=[0];continue;case 7:l=a.ops.pop(),a.trys.pop();continue;default:if(!(n=(n=a.trys).length>0&&n[n.length-1])&&(6===l[0]||2===l[0])){a=0;continue}if(3===l[0]&&(!n||l[1]>n[0]&&l[1]<n[3])){a.label=l[1];break}if(6===l[0]&&a.label<n[1]){a.label=n[1],n=l;break}if(n&&a.label<n[2]){a.label=n[2],a.ops.push(l);break}n[2]&&a.ops.pop(),a.trys.pop();continue}l=t.call(e,a)}catch(e){l=[6,e],i=0}finally{r=n=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}}var i=Object.create?function(e,t,r,i){void 0===i&&(i=r);var n=Object.getOwnPropertyDescriptor(t,r);(!n||("get"in n?!t.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,i,n)}:function(e,t,r,i){void 0===i&&(i=r),e[i]=t[r]};function __exportStar(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||i(t,e,r)}function __values(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],i=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&i>=e.length&&(e=void 0),{value:e&&e[i++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function __read(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var i,n,a=r.call(e),o=[];try{for(;(void 0===t||t-- >0)&&!(i=a.next()).done;)o.push(i.value)}catch(e){n={error:e}}finally{try{i&&!i.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}return o}function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}function __spreadArrays(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var i=Array(e),n=0,t=0;t<r;t++)for(var a=arguments[t],o=0,l=a.length;o<l;o++,n++)i[n]=a[o];return i}function __spreadArray(e,t,r){if(r||2==arguments.length)for(var i,n=0,a=t.length;n<a;n++)!i&&n in t||(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}function __asyncGenerator(e,t,r){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var i,n=r.apply(e,t||[]),a=[];return i=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),verb("next"),verb("throw"),verb("return",function(e){return function(t){return Promise.resolve(t).then(e,reject)}}),i[Symbol.asyncIterator]=function(){return this},i;function verb(e,t){n[e]&&(i[e]=function(t){return new Promise(function(r,i){a.push([e,t,r,i])>1||resume(e,t)})},t&&(i[e]=t(i[e])))}function resume(e,t){try{var r;(r=n[e](t)).value instanceof __await?Promise.resolve(r.value.v).then(fulfill,reject):settle(a[0][2],r)}catch(e){settle(a[0][3],e)}}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){e(t),a.shift(),a.length&&resume(a[0][0],a[0][1])}}function __asyncDelegator(e){var t,r;return t={},verb("next"),verb("throw",function(e){throw e}),verb("return"),t[Symbol.iterator]=function(){return this},t;function verb(i,n){t[i]=e[i]?function(t){return(r=!r)?{value:__await(e[i](t)),done:!1}:n?n(t):t}:n}}function __asyncValues(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=__values(e),t={},verb("next"),verb("throw"),verb("return"),t[Symbol.asyncIterator]=function(){return this},t);function verb(r){t[r]=e[r]&&function(t){return new Promise(function(i,n){(function(e,t,r,i){Promise.resolve(i).then(function(t){e({value:t,done:r})},t)})(i,n,(t=e[r](t)).done,t.value)})}}}function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var n=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},ownKeys=function(e){return(ownKeys=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)};function __importStar(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=ownKeys(e),a=0;a<r.length;a++)"default"!==r[a]&&i(t,e,r[a]);return n(t,e),t}function __importDefault(e){return e&&e.__esModule?e:{default:e}}function __classPrivateFieldGet(e,t,r,i){if("a"===r&&!i)throw TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!i:!t.has(e))throw TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(e):i?i.value:t.get(e)}function __classPrivateFieldSet(e,t,r,i,n){if("m"===i)throw TypeError("Private method is not writable");if("a"===i&&!n)throw TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!n:!t.has(e))throw TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?n.call(e,r):n?n.value=r:t.set(e,r),r}function __classPrivateFieldIn(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function __addDisposableResource(e,t,r){if(null!=t){var i,n;if("object"!=typeof t&&"function"!=typeof t)throw TypeError("Object expected.");if(r){if(!Symbol.asyncDispose)throw TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(void 0===i){if(!Symbol.dispose)throw TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],r&&(n=i)}if("function"!=typeof i)throw TypeError("Object not disposable.");n&&(i=function(){try{n.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:i,async:r})}else r&&e.stack.push({async:!0});return t}var a="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var i=Error(r);return i.name="SuppressedError",i.error=e,i.suppressed=t,i};function __disposeResources(e){function fail(t){e.error=e.hasError?new a(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var t,r=0;return function next(){for(;t=e.stack.pop();)try{if(!t.async&&1===r)return r=0,e.stack.push(t),Promise.resolve().then(next);if(t.dispose){var i=t.dispose.call(t.value);if(t.async)return r|=2,Promise.resolve(i).then(next,function(e){return fail(e),next()})}else r|=1}catch(e){fail(e)}if(1===r)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function __rewriteRelativeImportExtension(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,r,i,n,a){return r?t?".jsx":".js":!i||n&&a?i+n+"."+a.toLowerCase()+"js":e}):e}let o={__extends,__assign,__rest,__decorate,__param,__esDecorate,__runInitializers,__propKey,__setFunctionName,__metadata,__awaiter,__generator,__createBinding:i,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__addDisposableResource,__disposeResources,__rewriteRelativeImportExtension}}};